{"version":3,"file":"Phaser4Nano.esm.js","sources":["../src/components/AlphaComponent.ts","../src/components/AnimationComponent.ts","../src/components/ContainerComponent.ts","../src/components/DirtyComponent.ts","../src/components/InputComponent.ts","../src/math/Vec2.ts","../src/components/OriginComponent.ts","../src/components/ParentComponent.ts","../src/components/PositionComponent.ts","../src/components/QuadAlphaComponent.ts","../src/components/QuadTintComponent.ts","../src/components/RenderableComponent.ts","../src/components/RotationComponent.ts","../src/components/ScaleComponent.ts","../src/components/SceneComponent.ts","../src/components/SizeComponent.ts","../src/components/SkewComponent.ts","../src/textures/Frame.ts","../src/textures/Texture.ts","../src/components/TextureComponent.ts","../src/math/LocalToGlobal.ts","../src/math/GlobalToLocal.ts","../src/components/TransformComponent.ts","../src/components/VisibleComponent.ts","../src/components/Install.ts","../src/gameobjects/GameObject.ts","../src/renderer/PackColor.ts","../src/gameobjects/Sprite.ts","../src/gameobjects/AnimatedSprite.ts","../src/gameobjects/Camera.ts","../src/gameobjects/Container.ts","../src/gameobjects/World.ts","../src/gameobjects/index.ts","../src/math/AppendMatrix2d.ts","../src/math/Ease.ts","../src/math/index.ts","../src/textures/AtlasParser.ts","../src/textures/SpriteSheetParser.ts","../src/textures/TextureManager.ts","../src/textures/index.ts","../src/core/DOMContentLoaded.ts","../src/core/AddToDOM.ts","../src/renderer/CheckShaderMaxIfStatements.ts","../src/renderer/MultiTextureQuadShader.ts","../src/renderer/WebGLRenderer.ts","../src/loader/File.ts","../src/loader/Loader.ts","../src/core/EventEmitter.ts","../src/Game.ts","../src/Scene.ts","../src/index.ts"],"sourcesContent":["import { IDirtyComponent } from './DirtyComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Dirtyable = Constructor<IDirtyComponent>\r\n\r\nexport function AlphaComponent<TBase extends Dirtyable>(Base: TBase): new() => Object\r\n{\r\n    return class AlphaComponent extends Base\r\n    {\r\n        private _alpha: number = 1;\r\n    \r\n        setAlpha (value: number = 1)\r\n        {\r\n            if (value !== this._alpha)\r\n            {\r\n                this._alpha = value;\r\n\r\n                this.setDirty();\r\n            }\r\n    \r\n            return this;\r\n        }\r\n    \r\n        get alpha (): number\r\n        {\r\n            return this._alpha;\r\n        }\r\n    \r\n        set alpha (value: number)\r\n        {\r\n            if (value !== this._alpha)\r\n            {\r\n                this._alpha = value;\r\n    \r\n                this.setDirty();\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IAlphaComponent\r\n{\r\n    alpha: number;\r\n    setAlpha (value?: number): this;\r\n}\r\n","import IAnimationData from './IAnimationData';\r\nimport IAnimationPlayConfig from './IAnimationPlayConfig';\r\nimport Frame from '../textures/Frame';\r\nimport { ITextureComponent } from './TextureComponent';\r\nimport { IParentComponent } from './ParentComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Animateable = Constructor<ITextureComponent & IParentComponent>\r\n\r\nexport function AnimationComponent<TBase extends Animateable>(Base: TBase)\r\n{\r\n    return class AnimationComponent extends Base\r\n    {\r\n        anims: Map<string, Frame[]>;\r\n        animData: IAnimationData;\r\n    \r\n        constructor (...args: any[])\r\n        {\r\n            super(args);\r\n    \r\n            this.anims = new Map();\r\n    \r\n            //  Holds all the data for the current animation only\r\n            this.animData = {\r\n                currentAnim: '',\r\n                currentFrames: [],\r\n                frameIndex: 0,\r\n                animSpeed: 0,\r\n                nextFrameTime: 0,\r\n                repeatCount: 0,\r\n                isPlaying: false,\r\n                yoyo: false,\r\n                pendingStart: false,\r\n                playingForward: true,\r\n                delay: 0,\r\n                repeatDelay: 0,\r\n                onStart: null,\r\n                onRepeat: null,\r\n                onComplete: null\r\n            };\r\n        }\r\n    \r\n        addAnimation (key: string, frames: string[] | number[])\r\n        {\r\n            if (!this.anims.has(key))\r\n            {\r\n                this.anims.set(key, this.texture.getFrames(frames));\r\n            }\r\n    \r\n            return this;\r\n        }\r\n    \r\n        addAnimationFromAtlas (key: string, prefix: string, start: number, end: number, zeroPad: number = 0, suffix: string = '')\r\n        {\r\n            if (!this.anims.has(key))\r\n            {\r\n                this.anims.set(key, this.texture.getFramesInRange(prefix, start, end, zeroPad, suffix));\r\n            }\r\n    \r\n            return this;\r\n        }\r\n    \r\n        removeAnimation (key: string)\r\n        {\r\n            this.anims.delete(key);\r\n    \r\n            return this;\r\n        }\r\n    \r\n        clearAnimations ()\r\n        {\r\n            this.anims.clear();\r\n    \r\n            return this;\r\n        }\r\n    \r\n        //  If animation already playing, calling this does nothing (use restart to restart one)\r\n        play (key: string, config: IAnimationPlayConfig = {})\r\n        {\r\n            const {\r\n                speed = 24,\r\n                repeat = 0,\r\n                yoyo = false,\r\n                startFrame = 0,\r\n                delay = 0,\r\n                repeatDelay = 0,\r\n                onStart = null,\r\n                onRepeat = null,\r\n                onComplete = null,\r\n                forceRestart = false\r\n            } = config;\r\n    \r\n            const data = this.animData;\r\n    \r\n            if (data.isPlaying)\r\n            {\r\n                if (data.currentAnim !== key)\r\n                {\r\n                    this.stop();\r\n                }\r\n                else if (!forceRestart)\r\n                {\r\n                    //  This animation is already playing? Just return then.\r\n                    return this;\r\n                }\r\n            }\r\n    \r\n            if (this.anims.has(key))\r\n            {\r\n                data.currentFrames = this.anims.get(key);\r\n                data.currentAnim = key;\r\n                data.frameIndex = startFrame;\r\n                data.animSpeed = 1000 / speed;\r\n                data.nextFrameTime = data.animSpeed + delay;\r\n                data.isPlaying = true;\r\n                data.playingForward = true;\r\n                data.yoyo = yoyo;\r\n                data.repeatCount = repeat;\r\n                data.delay = delay;\r\n                data.repeatDelay = repeatDelay;\r\n                data.onStart = onStart;\r\n                data.onRepeat = onRepeat;\r\n                data.onComplete = onComplete;\r\n    \r\n                //  If there is no start delay, we set the first frame immediately\r\n                if (delay === 0)\r\n                {\r\n                    this.setFrame(data.currentFrames[data.frameIndex]);\r\n    \r\n                    if (onStart)\r\n                    {\r\n                        onStart(this, key);\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    data.pendingStart = true;\r\n                }\r\n            }\r\n    \r\n            return this;\r\n        }\r\n    \r\n        stop ()\r\n        {\r\n            const data = this.animData;\r\n    \r\n            data.isPlaying = false;\r\n            data.currentAnim = '';\r\n    \r\n            if (data.onComplete)\r\n            {\r\n                data.onComplete(this, data.currentAnim);\r\n            }\r\n\r\n            return this;\r\n        }\r\n    \r\n        nextFrame ()\r\n        {\r\n            const data = this.animData;\r\n    \r\n            data.frameIndex++;\r\n    \r\n            //  There are no more frames, do we yoyo or repeat or end?\r\n            if (data.frameIndex === data.currentFrames.length)\r\n            {\r\n                if (data.yoyo)\r\n                {\r\n                    data.frameIndex--;\r\n                    data.playingForward = false;\r\n                }\r\n                else if (data.repeatCount === -1 || data.repeatCount > 0)\r\n                {\r\n                    data.frameIndex = 0;\r\n    \r\n                    if (data.repeatCount !== -1)\r\n                    {\r\n                        data.repeatCount--;\r\n                    }\r\n    \r\n                    if (data.onRepeat)\r\n                    {\r\n                        data.onRepeat(this, data.currentAnim);\r\n                    }\r\n    \r\n                    data.nextFrameTime += data.repeatDelay;\r\n                }\r\n                else\r\n                {\r\n                    data.frameIndex--;\r\n    \r\n                    return this.stop();\r\n                }\r\n            }\r\n    \r\n            this.setFrame(data.currentFrames[data.frameIndex]);\r\n    \r\n            data.nextFrameTime += data.animSpeed;\r\n\r\n            return this;\r\n        }\r\n    \r\n        prevFrame ()\r\n        {\r\n            const data = this.animData;\r\n    \r\n            data.frameIndex--;\r\n    \r\n            //  There are no more frames, do we repeat or end?\r\n            if (data.frameIndex === -1)\r\n            {\r\n                if (data.repeatCount === -1 || data.repeatCount > 0)\r\n                {\r\n                    data.frameIndex = 0;\r\n                    data.playingForward = true;\r\n    \r\n                    if (data.repeatCount !== -1)\r\n                    {\r\n                        data.repeatCount--;\r\n                    }\r\n    \r\n                    if (data.onRepeat)\r\n                    {\r\n                        data.onRepeat(this, data.currentAnim);\r\n                    }\r\n    \r\n                    data.nextFrameTime += data.repeatDelay;\r\n                }\r\n                else\r\n                {\r\n                    data.frameIndex = 0;\r\n    \r\n                    return this.stop();\r\n                }\r\n            }\r\n    \r\n            this.setFrame(data.currentFrames[data.frameIndex]);\r\n    \r\n            data.nextFrameTime += data.animSpeed;\r\n\r\n            return this;\r\n        }\r\n    \r\n        update (delta: number, now: number)\r\n        {\r\n            super.update(delta, now);\r\n    \r\n            const data = this.animData;\r\n    \r\n            if (!data.isPlaying)\r\n            {\r\n                return;\r\n            }\r\n    \r\n            data.nextFrameTime -= delta * 1000;\r\n            \r\n            //  Clamp to zero, otherwise a huge delta could cause animation playback issues\r\n            data.nextFrameTime = Math.max(data.nextFrameTime, 0);\r\n    \r\n            //  It's time for a new frame\r\n            if (data.nextFrameTime === 0)\r\n            {\r\n                //  Is this the start of our animation?\r\n                if (data.pendingStart)\r\n                {\r\n                    if (data.onStart)\r\n                    {\r\n                        data.onStart(this, data.currentAnim);\r\n                    }\r\n    \r\n                    data.pendingStart = false;\r\n                    data.nextFrameTime = data.animSpeed;\r\n                }\r\n                else if (data.playingForward)\r\n                {\r\n                    this.nextFrame();\r\n                }\r\n                else\r\n                {\r\n                    this.prevFrame();\r\n                }\r\n            }\r\n        }\r\n    \r\n        get isPlaying (): boolean\r\n        {\r\n            return this.animData.isPlaying;\r\n        }\r\n    \r\n        get isPlayingForward (): boolean\r\n        {\r\n            return (this.animData.isPlaying && this.animData.playingForward);\r\n        }\r\n    \r\n        get currentAnimation (): string\r\n        {\r\n            return this.animData.currentAnim;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IAnimationComponent\r\n{\r\n    anims: Map<string, Frame[]>;\r\n    animData: IAnimationData;\r\n    addAnimation (key: string, frames: string[] | number[]): this;\r\n    addAnimationFromAtlas (key: string, prefix: string, start: number, end: number, zeroPad?: number, suffix?: string): this;\r\n    removeAnimation (key: string): this;\r\n    clearAnimations (): this;\r\n    play (key: string, config?: IAnimationPlayConfig): this;\r\n    stop (): this;\r\n    nextFrame (): this;\r\n    prevFrame (): this;\r\n    update (delta?: number, now?: number): void;\r\n    isPlaying: boolean;\r\n    isPlayingForward: boolean;\r\n    currentAnimation: string;\r\n}\r\n","import IMatrix2d from '../math/IMatrix2d';\r\nimport IContainerChild from '../gameobjects/IContainerChild';\r\nimport { IParentComponent } from './ParentComponent';\r\nimport { ITransformComponent } from './TransformComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Transformable = Constructor<ITransformComponent & IParentComponent>;\r\n\r\nexport function ContainerComponent<TBase extends Transformable>(Base: TBase)\r\n{\r\n    return class ContainerComponent extends Base\r\n    {\r\n        children: IContainerChild[];\r\n\r\n        constructor (...args: any[])\r\n        {\r\n            super(args);\r\n\r\n            this.children = [];\r\n            this.isParent = true;\r\n        }\r\n\r\n        getChildren (): IContainerChild[]\r\n        {\r\n            return this.children;\r\n        }\r\n\r\n        addChild (...child: IContainerChild[])\r\n        {\r\n            child.forEach((entity) => {\r\n    \r\n                this.addChildAt(entity, this.children.length);\r\n    \r\n            });\r\n    \r\n            return this;\r\n        }\r\n    \r\n        addChildAt (child: IContainerChild, index: number): IContainerChild\r\n        {\r\n            if (index >= 0 && index <= this.children.length)\r\n            {\r\n                if (child.parent)\r\n                {\r\n                    child.parent.removeChild(child);\r\n                }\r\n\r\n                child.setParent(this);\r\n        \r\n                this.children.splice(index, 0, child);\r\n    \r\n                child.updateTransform();\r\n            }\r\n    \r\n            return child;\r\n        }\r\n    \r\n        swapChildren (child1: IContainerChild, child2: IContainerChild)\r\n        {\r\n            if (child1 === child2)\r\n            {\r\n                return this;\r\n            }\r\n        \r\n            const index1: number = this.getChildIndex(child1);\r\n            const index2: number = this.getChildIndex(child2);\r\n        \r\n            if (index1 < 0 || index2 < 0)\r\n            {\r\n                throw new Error('swap: Both children must belong to the same parent');\r\n            }\r\n        \r\n            this.children[index1] = child2;\r\n            this.children[index2] = child1;\r\n\r\n            return this;\r\n        }\r\n    \r\n        getChildIndex (child: IContainerChild): number\r\n        {\r\n            const index = this.children.indexOf(child);\r\n    \r\n            if (index === -1)\r\n            {\r\n                throw new Error('Supplied DisplayObject not child of the caller');\r\n            }\r\n        \r\n            return index;\r\n        }\r\n    \r\n        setChildIndex (child: IContainerChild, index: number)\r\n        {\r\n            const children = this.children;\r\n    \r\n            if (index < 0 || index >= children.length)\r\n            {\r\n                throw new Error('Index ' + index + ' out of bounds');\r\n            }\r\n        \r\n            const currentIndex = this.getChildIndex(child);\r\n        \r\n            children.splice(currentIndex, 1);\r\n            children.splice(index, 0, child);\r\n\r\n            return this;\r\n        }\r\n    \r\n        getChildAt (index: number): IContainerChild\r\n        {\r\n            if (index < 0 || index >= this.numChildren)\r\n            {\r\n                throw new Error('Index ' + index + ' out of bounds');\r\n            }\r\n    \r\n            return this.children[index];\r\n        }\r\n    \r\n        removeChild (child: IContainerChild): IContainerChild\r\n        {\r\n            const index = this.children.indexOf(child);\r\n    \r\n            if (index === -1)\r\n            {\r\n                return;\r\n            }\r\n        \r\n            return this.removeChildAt(index);\r\n        }\r\n    \r\n        removeChildAt (index: number): IContainerChild\r\n        {\r\n            const child = this.getChildAt(index);\r\n    \r\n            if (child)\r\n            {\r\n                child.parent = undefined;\r\n    \r\n                child.updateTransform();\r\n        \r\n                this.children.splice(index, 1);\r\n            }\r\n        \r\n            return child;\r\n        }\r\n    \r\n        removeChildren (beginIndex: number = 0, endIndex?: number): IContainerChild[]\r\n        {\r\n            const children = this.children;\r\n    \r\n            if (endIndex === undefined)\r\n            {\r\n                endIndex = children.length;\r\n            }\r\n        \r\n            const range = endIndex - beginIndex;\r\n        \r\n            if (range > 0 && range <= endIndex)\r\n            {\r\n                const removed = children.splice(beginIndex, range);\r\n        \r\n                removed.forEach((child) => {\r\n    \r\n                    child.parent = undefined;\r\n    \r\n                    child.updateTransform();\r\n    \r\n                });\r\n        \r\n                return removed;\r\n            }\r\n            else if (range === 0 && children.length === 0)\r\n            {\r\n                return [];\r\n            }\r\n            else\r\n            {\r\n                throw new Error('Range Error. Values out of bounds');\r\n            }\r\n        }\r\n    \r\n        update (dt?: number, now?: number)\r\n        {\r\n            const children = this.children;\r\n    \r\n            for (let i = 0; i < children.length; i++)\r\n            {\r\n                children[i].update(dt, now);\r\n            }\r\n        }\r\n    \r\n        get numChildren (): number\r\n        {\r\n            return this.children.length;\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IContainerComponent\r\n{\r\n    children: IContainerChild[];\r\n    isParent: boolean;\r\n    numChildren: number;\r\n    worldTransform: IMatrix2d;\r\n    getChildren (): IContainerChild[];\r\n    addChild (...child: IContainerChild[]): this;\r\n    addChildAt (child: IContainerChild, index: number): IContainerChild;\r\n    swapChildren (child1: IContainerChild, child2: IContainerChild): this;\r\n    getChildIndex (child: IContainerChild): number;\r\n    setChildIndex (child: IContainerChild, index: number): this;\r\n    getChildAt (index: number): IContainerChild;\r\n    removeChild (child: IContainerChild): IContainerChild;\r\n    removeChildAt (index: number): IContainerChild;\r\n    removeChildren (beginIndex: number, endIndex?: number): IContainerChild[];\r\n    update (dt?: number, now?: number): void;\r\n}\r\n","import { ISceneComponent } from './SceneComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype SceneChild = Constructor<ISceneComponent>\r\n\r\nexport function DirtyComponent<TBase extends SceneChild>(Base: TBase)\r\n{\r\n    return class DirtyComponent extends Base\r\n    {\r\n        dirty: boolean = true;\r\n        dirtyFrame: number = 0;\r\n    \r\n        setDirty (setFrame: boolean = true)\r\n        {\r\n            this.dirty = true;\r\n\r\n            if (setFrame)\r\n            {\r\n                this.dirtyFrame = this.scene.game.frame;\r\n            }\r\n    \r\n            return this;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IDirtyComponent\r\n{\r\n    dirty: boolean;\r\n    dirtyFrame: number;\r\n    setDirty (setFrame?: boolean): this;\r\n}\r\n","import IInteractiveArea from './IInteractiveArea';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\n\r\nexport function InputComponent<TBase extends Constructor>(Base: TBase)\r\n{\r\n    return class InputComponent extends Base\r\n    {\r\n        inputEnabled: boolean = false;\r\n        inputEnabledChildren: boolean = true;\r\n        inputHitArea: IInteractiveArea;\r\n        \r\n        setInteractive (hitArea?: IInteractiveArea)\r\n        {\r\n            this.inputEnabled = true;\r\n            this.inputHitArea = hitArea;\r\n            this.inputEnabledChildren = true;\r\n    \r\n            return this;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IInputComponent\r\n{\r\n    inputEnabled: boolean;\r\n    inputEnabledChildren: boolean;\r\n    inputHitArea?: IInteractiveArea;\r\n    setInteractive (hitArea?: IInteractiveArea): this;\r\n}\r\n","export default class Vec2\r\n{\r\n    /**\r\n     * X component\r\n     *\r\n     * @type {number}\r\n     * @memberof Vec2\r\n     */\r\n    x: number;\r\n\r\n    /**\r\n     * Y component\r\n     *\r\n     * @type {number}\r\n     * @memberof Vec2\r\n     */\r\n    y: number;\r\n\r\n    /**\r\n     * Creates an instance of a Vector2.\r\n     * \r\n     * @param {number} [x=0] - X component\r\n     * @param {number} [y=0] - Y component\r\n     * @memberof Vec2\r\n     */\r\n    constructor (x: number = 0, y: number = 0)\r\n    {\r\n        this.set(x, y);\r\n    }\r\n\r\n    /**\r\n     * Sets the components of this Vector2.\r\n     * \r\n     * @param {number} [x=0] - X component\r\n     * @param {number} [y=0] - Y component\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    set (x: number = 0, y: number = 0): Vec2\r\n    {\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Sets all components of this Vector2 to zero.\r\n     *\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    zero (): Vec2\r\n    {\r\n        return this.set();\r\n    }\r\n\r\n    /**\r\n     * Returns a new array containg the Vector2 component values.\r\n     *\r\n     * @returns {number[]}\r\n     * @memberof Vec2\r\n     */\r\n    getArray (): number[]\r\n    {\r\n        return [ this.x, this.y ];\r\n    }\r\n\r\n    /**\r\n     * Sets the values of this Vector2 based on the given array, or array-like object, such as a Float32.\r\n     * \r\n     * The source must have 2 elements, starting from index 0 through to index 1.\r\n     *\r\n     * @param {number[]} src - The source array to copy the values from.\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    fromArray (src: number[]): Vec2\r\n    {\r\n        return this.set(src[0], src[1]);\r\n    }\r\n\r\n    [Symbol.iterator] ()\r\n    {\r\n        const data = this.getArray();\r\n\r\n        return data[Symbol.iterator]();\r\n    }\r\n}\r\n","import Vec2 from '../math/Vec2';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\n\r\nexport function OriginComponent<TBase extends Constructor>(Base: TBase): new() => Object\r\n{\r\n    return class OriginComponent extends Base\r\n    {\r\n        private _origin: Vec2 = new Vec2(0.5, 0.5);\r\n\r\n        setOrigin (originX: number, originY: number = originX)\r\n        {\r\n            this._origin.set(originX, originY);\r\n    \r\n            return this;\r\n        }\r\n        \r\n        get originX (): number\r\n        {\r\n            return this._origin.x;\r\n        }\r\n    \r\n        set originX (value: number)\r\n        {\r\n            this._origin.x = value;\r\n        }\r\n    \r\n        get originY (): number\r\n        {\r\n            return this._origin.y;\r\n        }\r\n    \r\n        set originY (value: number)\r\n        {\r\n            this._origin.y = value;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IOriginComponent\r\n{\r\n    originX: number;\r\n    originY: number;\r\n    setOrigin (originX: number, originY: number): this;\r\n}\r\n","import { IContainerComponent } from './ContainerComponent';\r\nimport { ITransformComponent } from './TransformComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Transformable = Constructor<ITransformComponent>;\r\n\r\nexport function ParentComponent<TBase extends Transformable>(Base: TBase)\r\n{\r\n    return class ParentComponent extends Base\r\n    {\r\n        parent?: IContainerComponent;\r\n        isParent: boolean = false;\r\n    \r\n        setParent (parent?: IContainerComponent)\r\n        {\r\n            this.parent = parent;\r\n    \r\n            return this;\r\n        }\r\n\r\n        update (dt?: number, now?: number)\r\n        {\r\n            //  Left blank to be overridden by custom classes\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IParentComponent\r\n{\r\n    parent?: IContainerComponent;\r\n    isParent: boolean;\r\n    setParent (parent?: IContainerComponent): this;\r\n    update (dt?: number, now?: number): void;\r\n}\r\n","import Vec2 from '../math/Vec2';\r\nimport { ITransformComponent } from './TransformComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Positionable = Constructor<ITransformComponent>\r\n\r\nexport function PositionComponent<TBase extends Positionable>(Base: TBase): new() => Object\r\n{\r\n    return class PositionComponent extends Base\r\n    {\r\n        private _position: Vec2 = new Vec2();\r\n\r\n        setPosition (x: number, y: number = x)\r\n        {\r\n            this._position.set(x, y);\r\n    \r\n            return this.updateTransform();\r\n        }\r\n    \r\n        set x (value: number)\r\n        {\r\n            this._position.x = value;\r\n    \r\n            this.updateTransform();\r\n        }\r\n    \r\n        get x (): number\r\n        {\r\n            return this._position.x;\r\n        }\r\n    \r\n        set y (value: number)\r\n        {\r\n            this._position.y = value;\r\n    \r\n            this.updateTransform();\r\n        }\r\n    \r\n        get y (): number\r\n        {\r\n            return this._position.y;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IPositionComponent\r\n{\r\n    x: number;\r\n    y: number;\r\n    setPosition (x: number, y?: number): this;\r\n}\r\n","import ISprite from '../gameobjects/ISprite';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Alphable = Constructor<ISprite>\r\n\r\nexport function QuadAlphaComponent<TBase extends Alphable>(Base: TBase): new() => Object\r\n{\r\n    return class QuadAlphaComponent extends Base\r\n    {\r\n        private _alpha: number = 1;\r\n\r\n        vertexAlpha: Float32Array;\r\n\r\n        constructor (...args: any[])\r\n        {\r\n            super(args);\r\n    \r\n            this.vertexAlpha = new Float32Array(4).fill(1);\r\n        }\r\n\r\n        setAlpha (topLeft: number = 1, topRight: number = topLeft, bottomLeft: number = topLeft, bottomRight: number = topLeft)\r\n        {\r\n            const alpha = this.vertexAlpha;\r\n    \r\n            alpha[0] = topLeft;\r\n            alpha[1] = topRight;\r\n            alpha[2] = bottomLeft;\r\n            alpha[3] = bottomRight;\r\n    \r\n            return this.packColors();\r\n        }\r\n\r\n        get alpha (): number\r\n        {\r\n            return this._alpha;\r\n        }\r\n\r\n        set alpha (value: number)\r\n        {\r\n            this._alpha = value;\r\n    \r\n            this.setAlpha(value);\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IQuadAlphaComponent\r\n{\r\n    alpha: number;\r\n    vertexAlpha: Float32Array;\r\n    setAlpha (topLeft: number, topRight?: number, bottomLeft?: number, bottomRight?: number): this;\r\n}\r\n","import ISprite from '../gameobjects/ISprite';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Tintable = Constructor<ISprite>\r\n\r\nexport function QuadTintComponent<TBase extends Tintable>(Base: TBase): new() => Object\r\n{\r\n    return class QuadTintComponent extends Base\r\n    {\r\n        private _tint: number = 0xffffff;\r\n        vertexTint: Uint32Array;\r\n\r\n        constructor (...args: any[])\r\n        {\r\n            super(args);\r\n\r\n            this.vertexTint = new Uint32Array(4).fill(0xffffff);\r\n        }\r\n\r\n        setTint (topLeft: number = 0xffffff, topRight: number = topLeft, bottomLeft: number = topLeft, bottomRight: number = topLeft)\r\n        {\r\n            const tint = this.vertexTint;\r\n    \r\n            tint[0] = topLeft;\r\n            tint[1] = topRight;\r\n            tint[2] = bottomLeft;\r\n            tint[3] = bottomRight;\r\n    \r\n            return this.packColors();\r\n        }\r\n    \r\n        get tint (): number\r\n        {\r\n            return this._tint;\r\n        }\r\n    \r\n        set tint (value: number)\r\n        {\r\n            this._tint = value;\r\n    \r\n            this.setTint(value);\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IQuadTintComponent\r\n{\r\n    tint: number;\r\n    vertexTint: Uint32Array;\r\n    setTint (topLeft: number, topRight?: number, bottomLeft?: number, bottomRight?: number): this;\r\n}\r\n","import { IAlphaComponent } from './AlphaComponent';\r\nimport { ITextureComponent } from './TextureComponent';\r\nimport { IVisibleComponent } from './VisibleComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype CanRender = Constructor<IAlphaComponent & ITextureComponent & IVisibleComponent>;\r\n\r\nexport function RenderableComponent<TBase extends CanRender>(Base: TBase)\r\n{\r\n    return class RenderableComponent extends Base\r\n    {\r\n        renderable: boolean = true;\r\n    \r\n        setRenderable (value: boolean)\r\n        {\r\n            this.renderable = value;\r\n    \r\n            return this;\r\n        }\r\n\r\n        willRender (): boolean\r\n        {\r\n            return (this.visible && this.renderable && this.alpha > 0 && this.hasTexture);\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IRenderableComponent\r\n{\r\n    renderable: boolean;\r\n    setRenderable: (value: boolean) => this;\r\n    willRender: () => boolean;\r\n}\r\n","import { ITransformComponent } from './TransformComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Rotateable = Constructor<ITransformComponent>\r\n\r\nexport function RotationComponent<TBase extends Rotateable>(Base: TBase): new() => Object\r\n{\r\n    return class RotationComponent extends Base\r\n    {\r\n        private _rotation: number = 0;\r\n    \r\n        setRotation (rotation: number)\r\n        {\r\n            if (rotation !== this._rotation)\r\n            {\r\n                this._rotation = rotation;\r\n    \r\n                this.updateCache();\r\n            }\r\n    \r\n            return this;\r\n        }\r\n        \r\n        set rotation (value: number)\r\n        {\r\n            if (value !== this._rotation)\r\n            {\r\n                this._rotation = value;\r\n    \r\n                this.updateCache();\r\n            }\r\n        }\r\n    \r\n        get rotation (): number\r\n        {\r\n            return this._rotation;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IRotationComponent\r\n{\r\n    rotation: number;\r\n    setRotation (value: number): this;\r\n}\r\n","import Vec2 from '../math/Vec2';\r\nimport { ITransformComponent } from './TransformComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Scaleable = Constructor<ITransformComponent>\r\n\r\nexport function ScaleComponent<TBase extends Scaleable>(Base: TBase): new() => Object\r\n{\r\n    return class ScaleComponent extends Base\r\n    {\r\n        private _scale: Vec2 = new Vec2(1, 1);\r\n\r\n        setScale (scaleX: number, scaleY: number = scaleX)\r\n        {\r\n            this._scale.set(scaleX, scaleY);\r\n    \r\n            return this.updateCache();\r\n        }\r\n    \r\n        set scaleX (value: number)\r\n        {\r\n            if (value !== this._scale.x)\r\n            {\r\n                this._scale.x = value;\r\n    \r\n                this.updateCache();\r\n            }\r\n        }\r\n    \r\n        get scaleX (): number\r\n        {\r\n            return this._scale.x;\r\n        }\r\n    \r\n        set scaleY (value: number)\r\n        {\r\n            if (value !== this._scale.y)\r\n            {\r\n                this._scale.y = value;\r\n    \r\n                this.updateCache();\r\n            }\r\n        }\r\n    \r\n        get scaleY (): number\r\n        {\r\n            return this._scale.y;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IScaleComponent\r\n{\r\n    scaleX: number;\r\n    scaleY: number;\r\n    setScale (scaleX: number, scaleY?: number): this;\r\n}\r\n","import Scene from '../Scene';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\n\r\nexport function SceneComponent<TBase extends Constructor>(Base: TBase)\r\n{\r\n    return class SceneComponent extends Base\r\n    {\r\n        scene: Scene;\r\n\r\n        setScene (scene: Scene)\r\n        {\r\n            this.scene = scene;\r\n    \r\n            return this;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface ISceneComponent\r\n{\r\n    scene: Scene;\r\n    setScene (scene: Scene): this;\r\n}\r\n","type Constructor<T = {}> = new (...args: any[]) => T;\r\n\r\nexport function SizeComponent<TBase extends Constructor>(Base: TBase)\r\n{\r\n    return class SizeComponent extends Base\r\n    {\r\n        width: number;\r\n        height: number;\r\n\r\n        setSize (width: number, height: number)\r\n        {\r\n            this.width = width;\r\n            this.height = height;\r\n    \r\n            return this;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface ISizeComponent\r\n{\r\n    width: number;\r\n    height: number;\r\n    setSize (width: number, height: number): this;\r\n}\r\n","import Vec2 from '../math/Vec2';\r\nimport { ITransformComponent } from './TransformComponent';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Skewable = Constructor<ITransformComponent>\r\n\r\nexport function SkewComponent<TBase extends Skewable>(Base: TBase): new() => Object\r\n{\r\n    return class SkewComponent extends Base\r\n    {\r\n        private _skew: Vec2 = new Vec2(0, 0);\r\n\r\n        setSkew (skewX: number, skewY: number = skewX)\r\n        {\r\n            this._skew.set(skewX, skewY);\r\n    \r\n            return this.updateCache();\r\n        }\r\n        \r\n        set skewX (value: number)\r\n        {\r\n            if (value !== this._skew.x)\r\n            {\r\n                this._skew.x = value;\r\n    \r\n                this.updateCache();\r\n            }\r\n        }\r\n    \r\n        get skewX (): number\r\n        {\r\n            return this._skew.x;\r\n        }\r\n    \r\n        set skewY (value: number)\r\n        {\r\n            if (value !== this._skew.y)\r\n            {\r\n                this._skew.y = value;\r\n    \r\n                this.updateCache();\r\n            }\r\n        }\r\n\r\n        get skewY (): number\r\n        {\r\n            return this._skew.y;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface ISkewComponent\r\n{\r\n    skewX: number;\r\n    skewY: number;\r\n    setSkew (skewX: number, skewY?: number): this;\r\n}\r\n","import Texture from './Texture';\r\n\r\nexport default class Frame\r\n{\r\n    texture: Texture;\r\n    key: string | number;\r\n\r\n    //  This is the actual area of the texture to draw to canvas / webgl, including any extruded data.\r\n    //  This is the same as the 'trimmed' + 'extruded' area from an atlas.\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n\r\n    trimmed: boolean = false;\r\n\r\n    //  Original size of the image before being trimmed or added to an atlas (which can add extrude data to it).\r\n    sourceSizeWidth: number;\r\n    sourceSizeHeight: number;\r\n\r\n    //  The size of the image having been trimmed, before being added to the atlas (i.e. doesn't have any extrusion values in it)\r\n    spriteSourceSizeX: number;\r\n    spriteSourceSizeY: number;\r\n    spriteSourceSizeWidth: number;\r\n    spriteSourceSizeHeight: number;\r\n\r\n    pivot: { x: number, y: number };\r\n\r\n    u0: number;\r\n    v0: number;\r\n    u1: number;\r\n    v1: number;\r\n\r\n    constructor (texture: Texture, key: string | number, x: number, y: number, width: number, height: number)\r\n    {\r\n        this.texture = texture;\r\n        this.key = key;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.updateUVs();\r\n    }\r\n\r\n    setPivot (x: number, y: number)\r\n    {\r\n        this.pivot = { x, y };\r\n    }\r\n\r\n    setSourceSize (width: number, height: number)\r\n    {\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n    }\r\n\r\n    setTrim (width: number, height: number, x: number, y: number, w: number, h: number)\r\n    {\r\n        this.trimmed = true;\r\n\r\n        this.sourceSizeWidth = width;\r\n        this.sourceSizeHeight = height;\r\n\r\n        this.spriteSourceSizeX = x;\r\n        this.spriteSourceSizeY = y;\r\n        this.spriteSourceSizeWidth = w;\r\n        this.spriteSourceSizeHeight = h;\r\n    }\r\n\r\n    updateUVs ()\r\n    {\r\n        const { x, y, width, height } = this;\r\n\r\n        const baseTextureWidth = this.texture.width;\r\n        const baseTextureHeight = this.texture.height;\r\n\r\n        this.u0 = x / baseTextureWidth;\r\n        this.v0 = y / baseTextureHeight;\r\n\r\n        this.u1 = (x + width) / baseTextureWidth;\r\n        this.v1 = (y + height) / baseTextureHeight;\r\n    }\r\n}\r\n","import WebGLRenderer from '../renderer/WebGLRenderer';\r\nimport Frame from './Frame';\r\n\r\nexport default class Texture\r\n{\r\n    key: string;\r\n\r\n    width: number;\r\n    height: number;\r\n\r\n    image: TexImageSource;\r\n\r\n    renderer: WebGLRenderer;\r\n    glTexture: WebGLTexture;\r\n    glIndex: number = 0;\r\n    glIndexCounter: number = -1;\r\n\r\n    firstFrame: Frame;\r\n\r\n    frames: Map<string | number, Frame>;\r\n\r\n    constructor (key: string, image: TexImageSource)\r\n    {\r\n        this.key = key;\r\n\r\n        this.image = image;\r\n\r\n        this.width = image.width;\r\n        this.height = image.height;\r\n\r\n        this.frames = new Map();\r\n\r\n        this.add('__BASE', 0, 0, image.width, image.height);\r\n    }\r\n\r\n    add (key: string | number, x: number, y: number, width: number, height: number): Frame\r\n    {\r\n        if (this.frames.has(key))\r\n        {\r\n            return null;\r\n        }\r\n\r\n        let frame = new Frame(this, key, x, y, width, height);\r\n\r\n        this.frames.set(key, frame);\r\n\r\n        if (!this.firstFrame || this.firstFrame.key === '__BASE')\r\n        {\r\n            this.firstFrame = frame;\r\n        }\r\n\r\n        return frame;\r\n    }\r\n\r\n    get (key?: string | number | Frame)\r\n    {\r\n        //  null, undefined, empty string, zero\r\n        if (!key)\r\n        {\r\n            return this.firstFrame;\r\n        }\r\n\r\n        if (key instanceof Frame)\r\n        {\r\n            key = key.key;\r\n        }\r\n\r\n        let frame: Frame = this.frames.get(key);\r\n\r\n        if (!frame)\r\n        {\r\n            console.warn('Texture.frame missing: ' + key);\r\n\r\n            frame = this.firstFrame;\r\n        }\r\n\r\n        return frame;\r\n    }\r\n\r\n    getFrames (frames: string[] | number[]): Frame[]\r\n    {\r\n        const output: Frame[] = [];\r\n\r\n        frames.forEach((key: string | number) => {\r\n\r\n            output.push(this.get(key));\r\n\r\n        });\r\n\r\n        return output;\r\n    }\r\n\r\n    getFramesInRange (prefix: string, start: number, end: number, zeroPad: number = 0, suffix: string = ''): Frame[]\r\n    {\r\n        const frameKeys = [];\r\n\r\n        const diff: number = (start < end) ? 1 : -1;\r\n\r\n        //  Adjust because we use i !== end in the for loop\r\n        end += diff;\r\n\r\n        for (let i: number = start; i !== end; i += diff)\r\n        {\r\n            frameKeys.push(prefix + i.toString().padStart(zeroPad, '0') + suffix);\r\n        }\r\n\r\n        return this.getFrames(frameKeys);\r\n    }\r\n\r\n}\r\n","import Texture from '../textures/Texture';\r\nimport Frame from '../textures/Frame';\r\nimport ISprite from '../gameobjects/ISprite';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Sprite = Constructor<ISprite>\r\n\r\nexport function TextureComponent<TBase extends Sprite>(Base: TBase): new() => Object\r\n{\r\n    return class TextureComponent extends Base\r\n    {\r\n        texture: Texture;\r\n        frame: Frame;\r\n        hasTexture: boolean = false;\r\n\r\n        private _prevTextureID: number = -1;\r\n\r\n        setTexture (key: string | Texture, frame?: string | number)\r\n        {\r\n            if (key instanceof Texture)\r\n            {\r\n                this.texture = key;\r\n            }\r\n            else\r\n            {\r\n                this.texture = this.scene.textures.get(key);\r\n            }\r\n    \r\n            if (!this.texture)\r\n            {\r\n                console.warn('Invalid Texture key: ' + key);\r\n            }\r\n            else\r\n            {\r\n                this.setFrame(frame);\r\n            }\r\n    \r\n            return this;\r\n        }\r\n    \r\n        setFrame (key?: string | number | Frame)\r\n        {\r\n            const frame: Frame = this.texture.get(key);\r\n    \r\n            if (frame === this.frame)\r\n            {\r\n                return this;\r\n            }\r\n    \r\n            this.frame = frame;\r\n    \r\n            this.setSize(frame.sourceSizeWidth, frame.sourceSizeHeight);\r\n    \r\n            if (frame.pivot)\r\n            {\r\n                this.setOrigin(frame.pivot.x, frame.pivot.y);\r\n            }\r\n    \r\n            const data = this.vertexData;\r\n    \r\n            //  This rarely changes, so we'll set it here, rather than every game step:\r\n    \r\n            data[2] = frame.u0;\r\n            data[3] = frame.v0;\r\n    \r\n            data[8] = frame.u0;\r\n            data[9] = frame.v1;\r\n    \r\n            data[14] = frame.u1;\r\n            data[15] = frame.v1;\r\n    \r\n            data[20] = frame.u1;\r\n            data[21] = frame.v0;\r\n\r\n            this.setDirty();\r\n    \r\n            this.hasTexture = true;\r\n    \r\n            return this;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface ITextureComponent\r\n{\r\n    texture: Texture;\r\n    frame: Frame;\r\n    hasTexture: boolean;\r\n    setTexture (key: string | Texture, frame?: string | number): this;\r\n    setFrame (key?: string | number | Frame): this;\r\n}\r\n","import Vec2 from './Vec2';\r\nimport IMatrix2d from './IMatrix2d';\r\n\r\nexport default function LocalToGlobal (transform: IMatrix2d, x: number, y: number, outPoint: Vec2 = new Vec2()): Vec2\r\n{\r\n    const { a, b, c, d, tx, ty } = transform;\r\n\r\n    outPoint.x = (a * x) + (c * y) + tx;\r\n    outPoint.y = (b * x) + (d * y) + ty;\r\n\r\n    return outPoint;\r\n}\r\n","import Vec2 from './Vec2';\r\nimport IMatrix2d from './IMatrix2d';\r\n\r\nexport default function GlobalToLocal (transform: IMatrix2d, x: number, y: number, outPoint: Vec2 = new Vec2()): Vec2\r\n{\r\n    const { a, b, c, d, tx, ty } = transform;\r\n\r\n    const id: number = 1 / ((a * d) + (c * -b));\r\n\r\n    outPoint.x = (d * id * x) + (-c * id * y) + (((ty * c) - (tx * d)) * id);\r\n    outPoint.y = (a * id * y) + (-b * id * x) + (((-ty * a) + (tx * b)) * id);\r\n\r\n    return outPoint;\r\n}\r\n","import { IDirtyComponent } from './DirtyComponent';\r\nimport { IPositionComponent } from './PositionComponent';\r\nimport { IRotationComponent } from './RotationComponent';\r\nimport { IScaleComponent } from './ScaleComponent';\r\nimport { ISkewComponent } from './SkewComponent';\r\nimport IContainerChild from '../gameobjects/IContainerChild';\r\nimport IMatrix2d from '../math/IMatrix2d';\r\nimport Vec2 from '../math/Vec2';\r\nimport LocalToGlobal from '../math/LocalToGlobal';\r\nimport GlobalToLocal from '../math/GlobalToLocal';\r\n\r\ntype Constructor<T = {}> = new (...args: any[]) => T;\r\ntype Transformable = Constructor<IDirtyComponent & IContainerChild & IPositionComponent & IRotationComponent & IScaleComponent & ISkewComponent>\r\n\r\nexport function TransformComponent<TBase extends Transformable>(Base: TBase)\r\n{\r\n    return class TransformComponent extends Base\r\n    {\r\n        localTransform: IMatrix2d;\r\n        worldTransform: IMatrix2d;\r\n\r\n        constructor (...args: any[])\r\n        {\r\n            super(args);\r\n\r\n            this.localTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };\r\n            this.worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };\r\n        }\r\n\r\n        updateCache ()\r\n        {\r\n            const transform = this.localTransform;\r\n    \r\n            const { rotation, skewX, skewY, scaleX, scaleY } = this;\r\n\r\n            transform.a = Math.cos(rotation + skewY) * scaleX;\r\n            transform.b = Math.sin(rotation + skewY) * scaleX;\r\n            transform.c = -Math.sin(rotation - skewX) * scaleY;\r\n            transform.d = Math.cos(rotation - skewX) * scaleY;\r\n    \r\n            return this.updateTransform();\r\n        }\r\n\r\n        updateTransform ()\r\n        {\r\n            this.setDirty();\r\n    \r\n            const parent = this.parent;\r\n    \r\n            const lt = this.localTransform;\r\n            const wt = this.worldTransform;\r\n    \r\n            lt.tx = this.x;\r\n            lt.ty = this.y;\r\n    \r\n            if (!parent)\r\n            {\r\n                wt.a = lt.a;\r\n                wt.b = lt.b;\r\n                wt.c = lt.c;\r\n                wt.d = lt.d;\r\n                wt.tx = lt.tx;\r\n                wt.ty = lt.ty;\r\n    \r\n                return this;\r\n            }\r\n    \r\n            const pt = parent.worldTransform;\r\n    \r\n            let { a, b, c, d, tx, ty } = lt;\r\n    \r\n            wt.a  = a  * pt.a + b  * pt.c;\r\n            wt.b  = a  * pt.b + b  * pt.d;\r\n            wt.c  = c  * pt.a + d  * pt.c;\r\n            wt.d  = c  * pt.b + d  * pt.d;\r\n            wt.tx = tx * pt.a + ty * pt.c + pt.tx;\r\n            wt.ty = tx * pt.b + ty * pt.d + pt.ty;\r\n    \r\n            return this;\r\n        }\r\n\r\n        localToGlobal (x: number, y: number, outPoint: Vec2 = new Vec2()): Vec2\r\n        {\r\n            return LocalToGlobal(this.worldTransform, x, y, outPoint);\r\n        }\r\n    \r\n        globalToLocal (x: number, y: number, outPoint: Vec2 = new Vec2()): Vec2\r\n        {\r\n            return GlobalToLocal(this.worldTransform, x, y, outPoint);\r\n        }\r\n    };\r\n}\r\n\r\nexport interface ITransformComponent\r\n{\r\n    localTransform: IMatrix2d;\r\n    worldTransform: IMatrix2d;\r\n    updateCache (): this;\r\n    updateTransform (): this;\r\n    localToGlobal (x: number, y: number, outPoint?: Vec2): Vec2;\r\n    globalToLocal (x: number, y: number, outPoint?: Vec2): Vec2;\r\n}\r\n","type Constructor<T = {}> = new (...args: any[]) => T;\r\n\r\nexport function VisibleComponent<TBase extends Constructor>(Base: TBase)\r\n{\r\n    return class VisibleComponent extends Base\r\n    {\r\n        visible: boolean = true;\r\n\r\n        setVisible (value: boolean)\r\n        {\r\n            this.visible = value;\r\n    \r\n            return this;\r\n        }\r\n    };\r\n}\r\n\r\nexport interface IVisibleComponent\r\n{\r\n    visible: boolean;\r\n    setVisible (value: boolean): this;\r\n}\r\n","export default function Install (baseClass: any, components: any[])\r\n{\r\n    let newClass = baseClass;\r\n\r\n    components.forEach(component => {\r\n\r\n        newClass = component(newClass);\r\n\r\n    });\r\n\r\n    return newClass;\r\n}\r\n","import Scene from '../Scene';\r\nimport Install from '../components/Install';\r\nimport * as Components from '../components';\r\nimport IGameObject from './IGameObject';\r\n\r\nexport default class GameObject extends Install(class {}, [\r\n    Components.AlphaComponent,\r\n    Components.DirtyComponent,\r\n    Components.ParentComponent,\r\n    Components.OriginComponent,\r\n    Components.PositionComponent,\r\n    Components.RenderableComponent,\r\n    Components.RotationComponent,\r\n    Components.ScaleComponent,\r\n    Components.SceneComponent,\r\n    Components.SizeComponent,\r\n    Components.SkewComponent,\r\n    Components.TransformComponent,\r\n    Components.VisibleComponent\r\n])\r\n{\r\n    constructor (scene: Scene, x: number = 0, y: number = 0)\r\n    {\r\n        super();\r\n\r\n        this.scene = scene;\r\n        this._position.set(x, y);\r\n        this.dirty = true;\r\n    }\r\n\r\n};\r\n\r\nexport default interface GameObject extends IGameObject {}\r\n","export default function (rgb: number, alpha: number): number\r\n{\r\n    let ua = ((alpha * 255) | 0) & 0xFF;\r\n\r\n    return ((ua << 24) | rgb) >>> 0;\r\n}\r\n","import Scene from '../Scene';\r\nimport GameObject from './GameObject';\r\nimport PackColor from '../renderer/PackColor';\r\nimport * as Components from '../components';\r\nimport Install from '../components/Install';\r\nimport ISprite from './ISprite';\r\n\r\nexport default class Sprite extends Install(GameObject, [\r\n    Components.ContainerComponent,\r\n    Components.QuadAlphaComponent,\r\n    Components.QuadTintComponent,\r\n    Components.TextureComponent\r\n])\r\n{\r\n    vertexData: Float32Array;\r\n    vertexColor: Uint32Array;\r\n\r\n    constructor (scene: Scene, x: number, y: number, texture: string, frame?: string | number)\r\n    {\r\n        super();\r\n\r\n        this.vertexData = new Float32Array(24).fill(0);\r\n        this.vertexColor = new Uint32Array(4).fill(4294967295);\r\n\r\n        this.setScene(scene);\r\n        this.setTexture(texture, frame);\r\n        this.setPosition(x, y);\r\n    }\r\n\r\n    packColors ()\r\n    {\r\n        const alpha = this.vertexAlpha;\r\n        const tint = this.vertexTint;\r\n        const color = this.vertexColor;\r\n\r\n        //  In lots of cases, this *never* changes, so cache it here:\r\n        color[0] = PackColor(tint[0], alpha[0]);\r\n        color[1] = PackColor(tint[1], alpha[1]);\r\n        color[2] = PackColor(tint[2], alpha[2]);\r\n        color[3] = PackColor(tint[3], alpha[3]);\r\n\r\n        this.setDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    updateVertices (F32: Float32Array, U32: Uint32Array, offset: number)\r\n    {\r\n        const data = this.vertexData;\r\n\r\n        //  Skip all of this if not dirty\r\n        if (this.dirty)\r\n        {\r\n            this.dirty = false;\r\n\r\n            const frame = this.frame;\r\n            const origin = this._origin;\r\n    \r\n            let w0: number;\r\n            let w1: number;\r\n            let h0: number;\r\n            let h1: number;\r\n    \r\n            const { a, b, c, d, tx, ty } = this.worldTransform;\r\n    \r\n            if (frame.trimmed)\r\n            {\r\n                w1 = frame.spriteSourceSizeX - (origin.x * frame.sourceSizeWidth);\r\n                w0 = w1 + frame.spriteSourceSizeWidth;\r\n    \r\n                h1 = frame.spriteSourceSizeY - (origin.y * frame.sourceSizeHeight);\r\n                h0 = h1 + frame.spriteSourceSizeHeight;\r\n            }\r\n            else\r\n            {\r\n                w1 = -origin.x * frame.sourceSizeWidth;\r\n                w0 = w1 + frame.sourceSizeWidth;\r\n    \r\n                h1 = -origin.y * frame.sourceSizeHeight;\r\n                h0 = h1 + frame.sourceSizeHeight;\r\n            }\r\n    \r\n            //  top left\r\n            data[0] = (w1 * a) + (h1 * c) + tx;\r\n            data[1] = (w1 * b) + (h1 * d) + ty;\r\n    \r\n            //  bottom left\r\n            data[6] = (w1 * a) + (h0 * c) + tx;\r\n            data[7] = (w1 * b) + (h0 * d) + ty;\r\n    \r\n            //  bottom right\r\n            data[12] = (w0 * a) + (h0 * c) + tx;\r\n            data[13] = (w0 * b) + (h0 * d) + ty;\r\n    \r\n            //  top right\r\n            data[18] = (w0 * a) + (h1 * c) + tx;\r\n            data[19] = (w0 * b) + (h1 * d) + ty;\r\n        }\r\n\r\n        const textureIndex = this.texture.glIndex;\r\n\r\n        //  Do we have a different texture ID?\r\n        if (textureIndex !== this._prevTextureID)\r\n        {\r\n            this._prevTextureID = textureIndex;\r\n\r\n            data[4] = textureIndex;\r\n            data[10] = textureIndex;\r\n            data[16] = textureIndex;\r\n            data[22] = textureIndex;\r\n        }\r\n\r\n        //  Copy the data to the array buffer\r\n        F32.set(data, offset);\r\n\r\n        const color = this.vertexColor;\r\n\r\n        //  Copy the vertex colors to the Uint32 view (as the data copy above overwrites them)\r\n        U32[offset + 5] = color[0];\r\n        U32[offset + 11] = color[2];\r\n        U32[offset + 17] = color[3];\r\n        U32[offset + 23] = color[1];\r\n    }\r\n}\r\n\r\nexport default interface Sprite extends ISprite {}\r\n\r\n/*\r\n    vertexData array structure:\r\n\r\n    0 = topLeft.x\r\n    1 = topLeft.y\r\n    2 = frame.u0\r\n    3 = frame.v0\r\n    4 = textureIndex\r\n    5 = topLeft.packedColor\r\n\r\n    6 = bottomLeft.x\r\n    7 = bottomLeft.y\r\n    8 = frame.u0\r\n    9 = frame.v1\r\n    10 = textureIndex\r\n    11 = bottomLeft.packedColor\r\n\r\n    12 = bottomRight.x\r\n    13 = bottomRight.y\r\n    14 = frame.u1\r\n    15 = frame.v1\r\n    16 = textureIndex\r\n    17 = bottomRight.packedColor\r\n\r\n    18 = topRight.x\r\n    19 = topRight.y\r\n    20 = frame.u1\r\n    21 = frame.v0\r\n    22 = textureIndex\r\n    23 = topRight.packedColor\r\n*/\r\n","import Scene from '../Scene';\r\nimport Sprite from './Sprite';\r\nimport * as Components from '../components';\r\nimport Install from '../components/Install';\r\nimport IAnimatedSprite from './IAnimatedSprite';\r\n\r\nexport default class AnimatedSprite extends Install(Sprite, [\r\n    Components.AnimationComponent\r\n])\r\n{\r\n    constructor (scene: Scene, x: number, y: number, texture: string, frame?: string | number)\r\n    {\r\n        super();\r\n\r\n        this.setScene(scene);\r\n        this.setTexture(texture, frame);\r\n        this.setPosition(x, y);\r\n    }\r\n}\r\n\r\nexport default interface AnimatedSprite extends IAnimatedSprite {}\r\n","import WebGLRenderer from '../renderer/WebGLRenderer';\r\nimport GameObject from './GameObject';\r\nimport Scene from '../Scene';\r\n\r\nexport default class Camera extends GameObject\r\n{\r\n    matrix: Float32Array;\r\n    renderer: WebGLRenderer;\r\n\r\n    readonly width: number;\r\n    readonly height: number;\r\n\r\n    constructor (scene: Scene, x: number = 0, y: number = 0)\r\n    {\r\n        super(scene, x, y);\r\n\r\n        this.renderer = scene.game.renderer;\r\n\r\n        this.matrix = new Float32Array([ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ]);\r\n\r\n        this.setSize(this.renderer.width, this.renderer.height);\r\n    }\r\n\r\n    updateTransform ()\r\n    {\r\n        this.dirtyFrame = this.scene.game.frame;\r\n\r\n        const lt = this.localTransform;\r\n        const wt = this.worldTransform;\r\n\r\n        lt.tx = this.x;\r\n        lt.ty = this.y;\r\n\r\n        const mat = this.matrix;\r\n        const { a, b, c, d, tx, ty } = lt;\r\n\r\n        const viewportW = this.renderer.width * this.originX;\r\n        const viewportH = this.renderer.height * this.originY;\r\n\r\n        mat[0] = a;\r\n        mat[1] = b;\r\n        mat[4] = c;\r\n        mat[5] = d;\r\n\r\n        //  combinates viewport translation + scrollX/Y\r\n\r\n        mat[12] = (a * -viewportW) + (c * -viewportH) + (viewportW + tx);\r\n        mat[13] = (b * -viewportW) + (d * -viewportH) + (viewportH + ty);\r\n\r\n        //  Store in worldTransform\r\n        wt.a = a;\r\n        wt.b = b;\r\n        wt.c = c;\r\n        wt.d = d;\r\n        wt.tx = mat[12];\r\n        wt.ty = mat[13];\r\n\r\n        // mat[12] = viewportW + tx; // combines translation to center of viewport + scrollX\r\n        // mat[13] = viewportH + ty; // combines translation to center of viewport + scrollY\r\n        // this.translate(-viewportW, -viewportH);\r\n        // console.log(mat);\r\n\r\n        return this;\r\n    }\r\n}\r\n","import Scene from '../Scene';\r\nimport GameObject from './GameObject';\r\nimport * as Components from '../components';\r\nimport Install from '../components/Install';\r\nimport IContainer from './IContainer';\r\nimport Game from '../Game';\r\n\r\nexport default class Container extends Install(GameObject, [\r\n    Components.ContainerComponent\r\n])\r\n{\r\n    constructor (scene: Scene, x: number = 0, y: number = 0)\r\n    {\r\n        super();\r\n\r\n        this.setScene(scene);\r\n        this.setPosition(x, y);\r\n    }\r\n\r\n    update (dt: number, now: number)\r\n    {\r\n        const children = this.children;\r\n\r\n        for (let i = 0; i < children.length; i++)\r\n        {\r\n            children[i].update(dt, now);\r\n        }\r\n    }\r\n\r\n    preRender (dt: number, now: number)\r\n    {\r\n        const game: Game = this.scene.game;\r\n\r\n        game.totalFrame++;\r\n\r\n        if (this.dirtyFrame >= game.frame)\r\n        {\r\n            game.dirtyFrame++;\r\n        }\r\n\r\n        const children = this.children;\r\n\r\n        for (let i = 0; i < children.length; i++)\r\n        {\r\n            // children[i].preRender(dt, now);\r\n        }\r\n    }\r\n\r\n    updateTransform ()\r\n    {\r\n        super.updateTransform();\r\n   \r\n        const children = this.children;\r\n\r\n        for (let i: number = 0; i < children.length; i++)\r\n        {\r\n            children[i].updateTransform();\r\n        }\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default interface Container extends IContainer {}\r\n","import Scene from '../Scene';\r\nimport Container from './Container';\r\nimport { IContainerComponent } from '../components/ContainerComponent';\r\nimport Game from '../Game';\r\nimport IContainerChild from './IContainerChild';\r\n\r\nexport default class World extends Container\r\n{\r\n    renderList = [];\r\n\r\n    constructor (scene: Scene)\r\n    {\r\n        super(scene);\r\n    }\r\n\r\n    private scanChildren (root: IContainerComponent)\r\n    {\r\n        const children = root.getChildren();\r\n\r\n        for (let i: number = 0; i < children.length; i++)\r\n        {\r\n            this.buildRenderList(children[i]);\r\n        }\r\n    }\r\n\r\n    private buildRenderList (root: IContainerChild)\r\n    {\r\n        const game: Game = this.scene.game;\r\n\r\n        if (root.willRender())\r\n        {\r\n            this.renderList.push(root);\r\n\r\n            if (root.dirtyFrame >= game.frame)\r\n            {\r\n                game.dirtyFrame++;\r\n            }\r\n        }\r\n\r\n        if (root.isParent)\r\n        {\r\n            this.scanChildren(root as unknown as IContainerComponent);\r\n        }\r\n    }\r\n\r\n    preRender ()\r\n    {\r\n        this.renderList = [];\r\n\r\n        this.scanChildren(this);\r\n\r\n        return this.renderList;\r\n    }\r\n\r\n    update (dt: number, now: number)\r\n    {\r\n        const children = this.children;\r\n\r\n        for (let i: number = 0; i < children.length; i++)\r\n        {\r\n            children[i].update(dt, now);\r\n        }\r\n    }\r\n}\r\n","import AnimatedSprite from './AnimatedSprite';\r\nimport Camera from './Camera';\r\nimport Container from './Container';\r\nimport GameObject from './GameObject';\r\nimport Sprite from './Sprite';\r\nimport World from './World';\r\n\r\nexport default {\r\n    AnimatedSprite,\r\n    Camera,\r\n    Container,\r\n    GameObject,\r\n    Sprite,\r\n    World\r\n}\r\n","import IMatrix2d from './IMatrix2d';\r\n\r\nexport default function AppendMatrix2d (mat1: IMatrix2d, mat2: IMatrix2d): IMatrix2d\r\n{\r\n    const a1 = mat1.a;\r\n    const b1 = mat1.b;\r\n    const c1 = mat1.c;\r\n    const d1 = mat1.d;\r\n\r\n    const a = (mat2.a * a1) + (mat2.b * c1);\r\n    const b = (mat2.a * b1) + (mat2.b * d1);\r\n    const c = (mat2.c * a1) + (mat2.d * c1);\r\n    const d = (mat2.c * b1) + (mat2.d * d1);\r\n\r\n    const tx = (mat2.tx * a1) + (mat2.ty * c1) + mat1.tx;\r\n    const ty = (mat2.tx * b1) + (mat2.ty * d1) + mat1.ty;\r\n\r\n    return { a, b, c, d, tx, ty };\r\n}\r\n","const easeCache = {\r\n\r\n    linear: (t: number) => {\r\n\r\n        return t\r\n\r\n    },\r\n\r\n    inQuad: (t: number) => {\r\n\r\n        return t * t\r\n\r\n    },\r\n\r\n    outQuad: (t: number) => {\r\n\r\n        return t * (2 - t)\r\n\r\n    },\r\n\r\n    inOutQuad: (t: number) => {\r\n\r\n        return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t\r\n\r\n    },\r\n\r\n    inCubic: (t: number) => {\r\n\r\n        return t * t * t\r\n\r\n    },\r\n\r\n    outCubic: (t: number) => {\r\n\r\n        return (--t) * t * t + 1\r\n\r\n    },\r\n\r\n    inOutCubic: (t: number) => {\r\n\r\n        return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1\r\n\r\n    },\r\n\r\n    inQuart: (t: number) => {\r\n\r\n        return t * t * t * t\r\n\r\n    },\r\n\r\n    outQuart: (t: number) => {\r\n\r\n        return 1 - (--t) * t * t * t\r\n\r\n    },\r\n\r\n    inOutQuart: (t: number) => {\r\n\r\n        return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t\r\n\r\n    },\r\n\r\n    inQuint: (t: number) => {\r\n\r\n        return t * t * t * t * t\r\n\r\n    },\r\n\r\n    outQuint: (t: number) => {\r\n\r\n        return 1 + (--t) * t * t * t * t\r\n\r\n    },\r\n\r\n    inOutQuint: (t: number) => {\r\n\r\n        return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\r\n\r\n    },\r\n\r\n    inSine: (t: number) => {\r\n\r\n        return -1 * Math.cos(t / 1 * (Math.PI * 0.5)) + 1;\r\n\r\n    },\r\n\r\n    outSine: (t: number) => {\r\n\r\n        return Math.sin(t / 1 * (Math.PI * 0.5));\r\n\r\n    },\r\n\r\n    inOutSine: (t: number) => {\r\n\r\n        return -1 / 2 * (Math.cos(Math.PI * t) - 1);\r\n\r\n    },\r\n\r\n    inExpo: (t: number) => {\r\n\r\n        return (t == 0) ? 0 : Math.pow(2, 10 * (t - 1));\r\n\r\n    },\r\n\r\n    outExpo: (t: number) => {\r\n\r\n        return (t == 1) ? 1 : (-Math.pow(2, -10 * t) + 1);\r\n\r\n    },\r\n\r\n    inOutExpo: (t: number) => {\r\n\r\n        if (t == 0) return 0;\r\n        if (t == 1) return 1;\r\n        if ((t /= 1 / 2) < 1) return 1 / 2 * Math.pow(2, 10 * (t - 1));\r\n\r\n        return 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\r\n\r\n    },\r\n\r\n    inCirc: (t: number) => {\r\n\r\n        return -1 * (Math.sqrt(1 - t * t) - 1);\r\n\r\n    },\r\n\r\n    outCirc: (t: number) => {\r\n\r\n        return Math.sqrt(1 - (t = t - 1) * t);\r\n\r\n    },\r\n\r\n    inOutCirc: (t: number) => {\r\n\r\n        if ((t /= 1 / 2) < 1) return -1 / 2 * (Math.sqrt(1 - t * t) - 1);\r\n\r\n        return 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\r\n\r\n    },\r\n\r\n    inElastic: (t: number) => {\r\n\r\n        if (t == 0) return 0;\r\n        if (t == 1) return 1;\r\n\r\n        let s = 1.70158;\r\n        let p = 0;\r\n        let a = 1;\r\n        if (!p) p = 0.3;\r\n\r\n        if (a < 1)\r\n        {\r\n            a = 1;\r\n            s = p / 4;\r\n        }\r\n        else\r\n        {\r\n            s = p / (2 * Math.PI) * Math.asin(1 / a);\r\n        }\r\n\r\n        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\r\n\r\n    },\r\n\r\n    outElastic: (t: number) => {\r\n\r\n        if (t == 0) return 0;\r\n        if (t == 1) return 1;\r\n\r\n        let s = 1.70158;\r\n        let p = 0;\r\n        let a = 1;\r\n\r\n        if (!p) p = 0.3;\r\n\r\n        if (a < 1)\r\n        {\r\n            a = 1;\r\n            s = p / 4;\r\n        }\r\n        else\r\n        {\r\n            s = p / (2 * Math.PI) * Math.asin(1 / a);\r\n        }\r\n\r\n        return a * Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;\r\n\r\n    },\r\n\r\n    inOutElastic: (t: number) => {\r\n\r\n        if (t == 0) return 0;\r\n        if ((t /= 1 / 2) == 2) return 1;\r\n\r\n        let s = 1.70158;\r\n        let p = 0;\r\n        let a = 1;\r\n\r\n        if (!p) p = (0.3 * 1.5);\r\n\r\n        if (a < 1)\r\n        {\r\n            a = 1;\r\n            s = p / 4;\r\n        }\r\n        else\r\n        {\r\n            s = p / (2 * Math.PI) * Math.asin(1 / a);\r\n        }\r\n\r\n        if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p));\r\n\r\n        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n\r\n    },\r\n\r\n    inBack: (t: number, s: number = 1.70158) => {\r\n\r\n        return 1 * t * t * ((s + 1) * t - s);\r\n\r\n    },\r\n\r\n    outBack: (t: number, s: number = 1.70158) => {\r\n\r\n        return 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\r\n\r\n    },\r\n\r\n    inOutBack: (t: number, s: number = 1.70158) => {\r\n\r\n        if ((t /= 1 / 2) < 1) return 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\r\n\r\n        return 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\r\n\r\n    },\r\n\r\n    inBounce: (t: number) => {\r\n\r\n        return 1 - easeCache.outBounce(1 - t);\r\n\r\n    },\r\n\r\n    outBounce: (t: number) => {\r\n\r\n        if ((t /= 1) < (1 / 2.75))\r\n        {\r\n            return (7.5625 * t * t);\r\n        }\r\n        else if (t < (2 / 2.75))\r\n        {\r\n            return (7.5625 * (t -= (1.5 / 2.75)) * t + .75);\r\n        }\r\n        else if (t < (2.5 / 2.75))\r\n        {\r\n            return (7.5625 * (t -= (2.25 / 2.75)) * t + .9375);\r\n        }\r\n        else\r\n        {\r\n            return (7.5625 * (t -= (2.625 / 2.75)) * t + .984375);\r\n        }\r\n\r\n    },\r\n\r\n    inOutBounce: (t: number) => {\r\n\r\n        if (t < 1 / 2) return easeCache.inBounce(t * 2) * 0.5;\r\n\r\n        return easeCache.outBounce(t * 2 - 1) * 0.5 + 0.5;\r\n\r\n    }\r\n\r\n};\r\n\r\nexport default function Ease (progress: number, easing: string)\r\n{\r\n    if (easeCache[easing])\r\n    {\r\n        return easeCache[easing](progress);\r\n    }\r\n}\r\n","import AppendMatrix2d from './AppendMatrix2d';\r\nimport Ease from './Ease';\r\nimport GlobalToLocal from './GlobalToLocal';\r\nimport LocalToGlobal from './LocalToGlobal';\r\nimport Vec2 from './Vec2';\r\n\r\nexport default {\r\n    AppendMatrix2d,\r\n    Ease,\r\n    GlobalToLocal,\r\n    LocalToGlobal,\r\n    Vec2\r\n}\r\n","import Texture from './Texture';\r\nimport Frame from './Frame';\r\n\r\nexport default function (texture: Texture, data: any)\r\n{\r\n    let frames;\r\n\r\n    if (Array.isArray(data.textures))\r\n    {\r\n        //  TP3 Format\r\n        frames = data.textures[0].frames;\r\n    }\r\n    else if (Array.isArray(data.frames))\r\n    {\r\n        //  TP2 Format Array\r\n        frames = data.frames;\r\n    }\r\n    else if (data.hasOwnProperty('frames'))\r\n    {\r\n        //  TP2 Format Hash\r\n        frames = Object.values(data.frames);\r\n    }\r\n    else\r\n    {\r\n        console.warn('Invalid Texture Atlas JSON');\r\n    }\r\n\r\n    if (frames)\r\n    {\r\n        let newFrame: Frame;\r\n\r\n        for (let i = 0; i < frames.length; i++)\r\n        {\r\n            let src = frames[i];\r\n\r\n            //  The frame values are the exact coordinates to cut the frame out of the atlas from\r\n            newFrame = texture.add(src.filename, src.frame.x, src.frame.y, src.frame.w, src.frame.h)\r\n\r\n            //  These are the original (non-trimmed) sprite values\r\n            if (src.trimmed)\r\n            {\r\n                newFrame.setTrim(\r\n                    src.sourceSize.w,\r\n                    src.sourceSize.h,\r\n                    src.spriteSourceSize.x,\r\n                    src.spriteSourceSize.y,\r\n                    src.spriteSourceSize.w,\r\n                    src.spriteSourceSize.h\r\n                );\r\n            }\r\n            else\r\n            {\r\n                newFrame.setSourceSize(src.sourceSize.w, src.sourceSize.h);\r\n            }\r\n\r\n            if (src.rotated)\r\n            {\r\n                // newFrame.rotated = true;\r\n                // newFrame.updateUVsInverted();\r\n            }\r\n\r\n            if (src.anchor)\r\n            {\r\n                newFrame.setPivot(src.anchor.x, src.anchor.y);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import IFrameConfig from './IFrameConfig';\r\nimport Texture from './Texture';\r\n\r\nexport default function (texture: Texture, x: number, y: number, width: number, height: number, frameConfig: IFrameConfig)\r\n{\r\n    let {\r\n        frameWidth = null,\r\n        frameHeight = null,\r\n        startFrame = 0,\r\n        endFrame = -1,\r\n        margin = 0,\r\n        spacing = 0\r\n    } = frameConfig;\r\n\r\n    if (!frameHeight)\r\n    {\r\n        frameHeight = frameWidth;\r\n    }\r\n\r\n    //  If missing we can't proceed\r\n    if (frameWidth === null)\r\n    {\r\n        throw new Error('TextureManager.SpriteSheet: Invalid frameWidth given.');\r\n    }\r\n\r\n    const row: number = Math.floor((width - margin + spacing) / (frameWidth + spacing));\r\n    const column: number = Math.floor((height - margin + spacing) / (frameHeight + spacing));\r\n    let total: number = row * column;\r\n\r\n    if (total === 0)\r\n    {\r\n        console.warn('SpriteSheet frame dimensions will result in zero frames.');\r\n    }\r\n\r\n    if (startFrame > total || startFrame < -total)\r\n    {\r\n        startFrame = 0;\r\n    }\r\n\r\n    if (startFrame < 0)\r\n    {\r\n        //  Allow negative skipframes.\r\n        startFrame = total + startFrame;\r\n    }\r\n\r\n    if (endFrame !== -1)\r\n    {\r\n        total = startFrame + (endFrame + 1);\r\n    }\r\n\r\n    let fx: number = margin;\r\n    let fy: number = margin;\r\n    let ax: number = 0;\r\n    let ay: number = 0;\r\n\r\n    for (let i: number = 0; i < total; i++)\r\n    {\r\n        ax = 0;\r\n        ay = 0;\r\n\r\n        let w: number = fx + frameWidth;\r\n        let h: number = fy + frameHeight;\r\n\r\n        if (w > width)\r\n        {\r\n            ax = w - width;\r\n        }\r\n\r\n        if (h > height)\r\n        {\r\n            ay = h - height;\r\n        }\r\n\r\n        texture.add(i, x + fx, y + fy, frameWidth - ax, frameHeight - ay);\r\n\r\n        fx += frameWidth + spacing;\r\n\r\n        if (fx + frameWidth > width)\r\n        {\r\n            fx = margin;\r\n            fy += frameHeight + spacing;\r\n        }\r\n    }\r\n}\r\n","import Texture from './Texture';\r\nimport Game from '../Game';\r\nimport SpriteSheetParser from './SpriteSheetParser';\r\nimport IFrameConfig from './IFrameConfig';\r\nimport AtlasParser from './AtlasParser';\r\n\r\nexport default class TextureManager\r\n{\r\n    textures: Map<string, Texture>;\r\n    game: Game;\r\n\r\n    constructor (game: Game)\r\n    {\r\n        this.game = game;\r\n\r\n        this.textures = new Map();\r\n    }\r\n\r\n    get (key: string): Texture\r\n    {\r\n        if (this.textures.has(key))\r\n        {\r\n            return this.textures.get(key);\r\n        }\r\n        else\r\n        {\r\n            return this.textures.get('__MISSING');\r\n        }\r\n    }\r\n\r\n    addImage (key: string, source: HTMLImageElement): Texture\r\n    {\r\n        let texture = null;\r\n\r\n        if (!this.textures.has(key))\r\n        {\r\n            texture = new Texture(key, source);\r\n\r\n            texture.glTexture = this.game.renderer.createGLTexture(texture.image);\r\n\r\n            this.textures.set(key, texture);\r\n        }\r\n\r\n        return texture;\r\n    }\r\n\r\n    addSpriteSheet (key: string, source: HTMLImageElement, frameConfig: IFrameConfig): Texture\r\n    {\r\n        let texture = null;\r\n\r\n        if (!this.textures.has(key))\r\n        {\r\n            texture = new Texture(key, source);\r\n\r\n            texture.glTexture = this.game.renderer.createGLTexture(texture.image);\r\n\r\n            SpriteSheetParser(texture, 0, 0, texture.width, texture.height, frameConfig);\r\n\r\n            this.textures.set(key, texture);\r\n        }\r\n\r\n        return texture;\r\n    }\r\n\r\n    addAtlas (key: string, source: HTMLImageElement, atlasData: Object): Texture\r\n    {\r\n        let texture = null;\r\n\r\n        if (!this.textures.has(key))\r\n        {\r\n            texture = new Texture(key, source);\r\n\r\n            texture.glTexture = this.game.renderer.createGLTexture(texture.image);\r\n\r\n            AtlasParser(texture, atlasData);\r\n\r\n            this.textures.set(key, texture);\r\n        }\r\n\r\n        return texture;\r\n    }\r\n\r\n    addColor (key: string, color: string, width: number = 32, height: number = 32): Texture\r\n    {\r\n        return this.addGrid(key, color, color, width, height, 0, 0);\r\n    }\r\n\r\n    addGrid (key: string, color1: string, color2: string, width: number = 32, height: number = 32, cols: number = 2, rows: number = 2): Texture\r\n    {\r\n        let texture = null;\r\n\r\n        if (!this.textures.has(key))\r\n        {\r\n            const ctx = this.createCanvas(width, height);\r\n\r\n            const colWidth = width / cols;\r\n            const rowHeight = height / rows;\r\n\r\n            ctx.fillStyle = color1;\r\n            ctx.fillRect(0, 0, width, height);\r\n\r\n            ctx.fillStyle = color2;\r\n\r\n            for (let y: number = 0; y < rows; y++)\r\n            {\r\n                for (let x: number = (y % 2); x < cols; x += 2)\r\n                {\r\n                    ctx.fillRect(x * colWidth, y * rowHeight, colWidth, rowHeight);\r\n                }\r\n            }\r\n\r\n            texture = new Texture(key, ctx.canvas);\r\n\r\n            texture.glTexture = this.game.renderer.createGLTexture(texture.image);\r\n\r\n            this.textures.set(key, texture);\r\n        }\r\n\r\n        return texture;\r\n    }\r\n\r\n    createCanvas (width: number, height: number): CanvasRenderingContext2D\r\n    {\r\n        const canvas = document.createElement('canvas');\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        return canvas.getContext('2d');\r\n    }\r\n\r\n}","import AtlasParser from './AtlasParser';\r\nimport Frame from './Frame';\r\nimport SpriteSheetParser from './SpriteSheetParser';\r\nimport Texture from './Texture';\r\nimport TextureManager from './TextureManager';\r\n\r\nexport default {\r\n    AtlasParser,\r\n    Frame,\r\n    SpriteSheetParser,\r\n    Texture,\r\n    TextureManager\r\n}\r\n","export default function DOMContentLoaded (callback: () => void)\r\n{\r\n    if (document.readyState === 'complete' || document.readyState === 'interactive')\r\n    {\r\n        callback();\r\n\r\n        return;\r\n    }\r\n\r\n    const check = () =>\r\n    {\r\n        document.removeEventListener('deviceready', check, true);\r\n        document.removeEventListener('DOMContentLoaded', check, true);\r\n        window.removeEventListener('load', check, true);\r\n\r\n        callback();\r\n    };\r\n\r\n    if (!document.body)\r\n    {\r\n        window.setTimeout(check, 20);\r\n    }\r\n    else if (window.hasOwnProperty('cordova'))\r\n    {\r\n        document.addEventListener('deviceready', check, true);\r\n    }\r\n    else\r\n    {\r\n        document.addEventListener('DOMContentLoaded', check, true);\r\n        window.addEventListener('load', check, true);\r\n    }\r\n}\r\n","export default function AddToDOM (element: HTMLElement, parent?: string | HTMLElement): HTMLElement\r\n{\r\n    let target: HTMLElement;\r\n\r\n    if (parent)\r\n    {\r\n        if (typeof parent === 'string')\r\n        {\r\n            //  Hopefully an element ID\r\n            target = document.getElementById(parent);\r\n        }\r\n        else if (typeof parent === 'object' && parent.nodeType === 1)\r\n        {\r\n            //  Quick test for a HTMLElement\r\n            target = parent;\r\n        }\r\n    }\r\n    else if (element.parentElement)\r\n    {\r\n        return element;\r\n    }\r\n\r\n    //  Fallback, covers an invalid ID and a non HTMLElement object\r\n    if (!target)\r\n    {\r\n        target = document.body;\r\n    }\r\n\r\n    target.appendChild(element);\r\n\r\n    return element;\r\n}\r\n","//  From Pixi v5\r\n\r\nconst fragTemplate = [\r\n    'precision mediump float;',\r\n    'void main(void){',\r\n    'float test = 0.1;',\r\n    '%forloop%',\r\n    'gl_FragColor = vec4(0.0);',\r\n    '}',\r\n].join('\\n');\r\n\r\nfunction generateSrc (maxIfs: number): string\r\n{\r\n    let src = '';\r\n\r\n    for (let i = 0; i < maxIfs; ++i)\r\n    {\r\n        if (i > 0)\r\n        {\r\n            src += '\\nelse ';\r\n        }\r\n\r\n        if (i < maxIfs - 1)\r\n        {\r\n            src += `if(test == ${i}.0){}`;\r\n        }\r\n    }\r\n\r\n    return src;\r\n}\r\n\r\nexport default function (maxIfs: number, gl: WebGLRenderingContext): number\r\n{\r\n    const shader = gl.createShader(gl.FRAGMENT_SHADER);\r\n\r\n    while (true)\r\n    {\r\n        const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateSrc(maxIfs));\r\n\r\n        gl.shaderSource(shader, fragmentSrc);\r\n        gl.compileShader(shader);\r\n\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\r\n        {\r\n            maxIfs = (maxIfs / 2) | 0;\r\n        }\r\n        else\r\n        {\r\n            // valid!\r\n            break;\r\n        }\r\n    }\r\n\r\n    return maxIfs;\r\n}\r\n","import WebGLRenderer from './WebGLRenderer';\r\nimport ISprite from '../gameobjects/ISprite';\r\nimport ISpriteMultiShader from './ISpriteMultiShader';\r\n// import SpriteBuffer from '../gameobjects/SpriteBuffer';\r\nimport Camera from '../gameobjects/Camera';\r\n\r\nconst shaderSource = {\r\n\r\n    fragmentShader: `\r\nprecision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nuniform sampler2D uTexture[%count%];\r\n\r\nvoid main (void)\r\n{\r\n    vec4 color;\r\n\r\n    %forloop%\r\n\r\n    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r\n}`,\r\n    \r\n    vertexShader: `\r\nprecision highp float;\r\n\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute float aTextureId;\r\nattribute vec4 aTintColor;\r\n\r\nuniform mat4 uProjectionMatrix;\r\nuniform mat4 uCameraMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying float vTextureId;\r\nvarying vec4 vTintColor;\r\n\r\nvoid main (void)\r\n{\r\n    vTextureCoord = aTextureCoord;\r\n    vTextureId = aTextureId;\r\n    vTintColor = aTintColor;\r\n\r\n    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);\r\n}`\r\n}\r\n\r\nexport default class MultiTextureQuadShader\r\n{\r\n    renderer: WebGLRenderer;\r\n    gl: WebGLRenderingContext;\r\n\r\n    program: WebGLProgram;\r\n\r\n    attribs: { position: number; textureCoord: number; textureIndex: number; color: number };\r\n    uniforms: { projectionMatrix: WebGLUniformLocation; cameraMatrix: WebGLUniformLocation; textureLocation: WebGLUniformLocation; };\r\n\r\n    /**\r\n     * Maximum number of quads per batch before a flush takes place.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    batchSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, per entry in the array buffer.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    dataSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, per entry in the element index array.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    indexSize: number;\r\n\r\n    /**\r\n     * The amount of elements / floats a single vertex consists of.\r\n     * \r\n     * The default is 6:\r\n     * \r\n     * position (x,y - 2 floats)\r\n     * texture coord (x,y - 2 floats)\r\n     * texture index (float)\r\n     * packed color (vec4)\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    vertexElementSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of a single vertex in the array buffer.\r\n     * \r\n     * This is `vertexElementSize * dataSize`.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    vertexByteSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of a single quad in the array buffer.\r\n     * \r\n     * This is `vertexByteSize * 4`.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    quadByteSize: number;\r\n\r\n    /**\r\n     * The size, in quantity of elements, of a single quad in the element index array.\r\n     * \r\n     * This is `vertexElementSize * 4`.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    quadElementSize: number;\r\n\r\n    /**\r\n     * The total number of entries per quad in the element index array.\r\n     * \r\n     * The IBO contains 6 entries per quad:\r\n     * \r\n     * 0, 1, 2\r\n     * 2, 3, 0\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    quadIndexSize: number;\r\n\r\n    /**\r\n     * The size, in bytes, of the Array Buffer.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    bufferByteSize: number;\r\n\r\n    /**\r\n     * The Array Buffer.\r\n     *\r\n     * @type {ArrayBuffer}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    data: ArrayBuffer;\r\n\r\n    /**\r\n     * Float32 View of the Array Buffer.\r\n     *\r\n     * @type {Float32Array}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    vertexViewF32: Float32Array;\r\n\r\n    /**\r\n     * Uint32 View of the Array Buffer.\r\n     *\r\n     * @type {Uint32Array}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    vertexViewU32: Uint32Array;\r\n\r\n    /**\r\n     * The Element Array Buffer.\r\n     *\r\n     * @type {Uint16Array}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    index: Uint16Array;\r\n\r\n    /**\r\n     * The data array buffer.\r\n     *\r\n     * @type {WebGLBuffer}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    vertexBuffer: WebGLBuffer;\r\n\r\n    /**\r\n     * The element array buffer.\r\n     *\r\n     * @type {WebGLBuffer}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    indexBuffer: WebGLBuffer;\r\n\r\n    /**\r\n     * The total number of quads added to the batch so far.\r\n     * Reset every bind and flush.\r\n     *\r\n     * @type {number}\r\n     * @memberof MultiTextureQuadShader\r\n     */\r\n    count: number;\r\n\r\n    constructor (renderer: WebGLRenderer, config: ISpriteMultiShader = {})\r\n    {\r\n        this.renderer = renderer;\r\n        this.gl = renderer.gl;\r\n\r\n        const {\r\n            batchSize = 4096,\r\n            dataSize = 4,\r\n            indexSize = 4,\r\n            vertexElementSize = 6,\r\n            quadIndexSize = 6,\r\n            fragmentShader = shaderSource.fragmentShader,\r\n            vertexShader = shaderSource.vertexShader\r\n        } = config;\r\n\r\n        this.batchSize = batchSize;\r\n        this.dataSize = dataSize;\r\n        this.indexSize = indexSize;\r\n        this.vertexElementSize = vertexElementSize;\r\n        this.vertexByteSize = vertexElementSize * dataSize;\r\n        this.quadByteSize = this.vertexByteSize * 4;\r\n        this.quadElementSize = vertexElementSize * 4;\r\n        this.quadIndexSize = quadIndexSize;\r\n        this.bufferByteSize = batchSize * this.quadByteSize;\r\n\r\n        this.createBuffers();\r\n        this.createShaders(fragmentShader, vertexShader);\r\n    }\r\n\r\n    createBuffers ()\r\n    {\r\n        let ibo: number[] = [];\r\n        \r\n        //  Seed the index buffer\r\n        for (let i: number = 0; i < (this.batchSize * this.indexSize); i += this.indexSize)\r\n        {\r\n            ibo.push(i + 0, i + 1, i + 2, i + 2, i + 3, i + 0);\r\n        }\r\n        \r\n        this.data = new ArrayBuffer(this.bufferByteSize);\r\n        this.index = new Uint16Array(ibo);\r\n\r\n        this.vertexViewF32 = new Float32Array(this.data);\r\n        this.vertexViewU32 = new Uint32Array(this.data);\r\n\r\n        const gl = this.gl;\r\n\r\n        this.vertexBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, this.data, gl.DYNAMIC_DRAW);\r\n       \r\n        this.indexBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.index, gl.STATIC_DRAW);\r\n\r\n        //  Tidy-up\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n        ibo = [];\r\n    }\r\n\r\n    createShaders (fragmentShaderSource: string, vertexShaderSource: string)\r\n    {\r\n        const gl = this.gl;\r\n        const maxTextures = this.renderer.maxTextures;\r\n\r\n        let src: string = '';\r\n\r\n        for (let i: number = 0; i < maxTextures; i++)\r\n        {\r\n            if (i > 0)\r\n            {\r\n                src += '\\n    else ';\r\n            }\r\n    \r\n            if (i < maxTextures - 1)\r\n            {\r\n                src += `if (vTextureId < ${i}.5)`;\r\n            }\r\n    \r\n            src += '\\n    {';\r\n            src += `\\n        color = texture2D(uTexture[${i}], vTextureCoord);`;\r\n            src += '\\n    }';\r\n        }\r\n\r\n        fragmentShaderSource = fragmentShaderSource.replace(/%count%/gi, `${maxTextures}`);\r\n        fragmentShaderSource = fragmentShaderSource.replace(/%forloop%/gi, src);\r\n\r\n        //  Create the shaders\r\n\r\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n        \r\n        gl.shaderSource(fragmentShader, fragmentShaderSource);\r\n        gl.compileShader(fragmentShader);\r\n        \r\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n        \r\n        gl.shaderSource(vertexShader, vertexShaderSource);\r\n        gl.compileShader(vertexShader);\r\n        \r\n        const program = gl.createProgram();\r\n        \r\n        gl.attachShader(program, vertexShader);\r\n        gl.attachShader(program, fragmentShader);\r\n        gl.linkProgram(program);\r\n\r\n        gl.useProgram(program);\r\n\r\n        this.program = program;\r\n        \r\n        const vertexPosition = gl.getAttribLocation(program, 'aVertexPosition');\r\n        const vertexTextureCoord = gl.getAttribLocation(program, 'aTextureCoord');\r\n        const vertexTextureIndex = gl.getAttribLocation(program, 'aTextureId');\r\n        const vertexColor = gl.getAttribLocation(program, 'aTintColor');\r\n\r\n        const uProjectionMatrix = gl.getUniformLocation(program, 'uProjectionMatrix');\r\n        const uCameraMatrix = gl.getUniformLocation(program, 'uCameraMatrix');\r\n        const uTextureLocation = gl.getUniformLocation(program, 'uTexture');\r\n\r\n        gl.enableVertexAttribArray(vertexPosition);\r\n        gl.enableVertexAttribArray(vertexTextureCoord);\r\n        gl.enableVertexAttribArray(vertexTextureIndex);\r\n        gl.enableVertexAttribArray(vertexColor);\r\n\r\n        this.attribs = {\r\n            position: vertexPosition,\r\n            textureCoord: vertexTextureCoord,\r\n            textureIndex: vertexTextureIndex,\r\n            color: vertexColor\r\n        };\r\n\r\n        this.uniforms = {\r\n            projectionMatrix: uProjectionMatrix,\r\n            cameraMatrix: uCameraMatrix,\r\n            textureLocation: uTextureLocation\r\n        };\r\n    }\r\n\r\n    bind (camera: Camera)\r\n    {\r\n        const gl = this.gl;\r\n        const renderer = this.renderer;\r\n        const uniforms = this.uniforms;\r\n\r\n        gl.useProgram(this.program);\r\n\r\n        gl.uniformMatrix4fv(uniforms.projectionMatrix, false, renderer.projectionMatrix);\r\n        gl.uniformMatrix4fv(uniforms.cameraMatrix, false, camera.matrix);\r\n        gl.uniform1iv(uniforms.textureLocation, renderer.textureIndex);\r\n\r\n        this.bindBuffers(this.indexBuffer, this.vertexBuffer);\r\n    }\r\n\r\n    bindBuffers (indexBuffer: WebGLBuffer, vertexBuffer: WebGLBuffer)\r\n    {\r\n        const gl = this.gl;\r\n        const stride = this.vertexByteSize;\r\n        const attribs = this.attribs;\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\r\n\r\n        //  attributes must be reset whenever you change buffers\r\n\r\n        gl.vertexAttribPointer(attribs.position, 2, gl.FLOAT, false, stride, 0);        // size = 8\r\n        gl.vertexAttribPointer(attribs.textureCoord, 2, gl.FLOAT, false, stride, 8);    // size = 8, offset = position\r\n        gl.vertexAttribPointer(attribs.textureIndex, 1, gl.FLOAT, false, stride, 16);   // size = 4, offset = position + tex coord\r\n        gl.vertexAttribPointer(attribs.color, 4, gl.UNSIGNED_BYTE, true, stride, 20);   // size = 4, offset = position + tex coord + index\r\n\r\n        this.count = 0;\r\n    }\r\n\r\n    /*\r\n    batchSpriteBuffer (buffer: SpriteBuffer): boolean\r\n    {\r\n        if (buffer.size > 0)\r\n        {\r\n            this.flush();\r\n\r\n            buffer.render();\r\n\r\n            //  Restore buffers\r\n            this.bindBuffers(this.indexBuffer, this.vertexBuffer);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n    */\r\n\r\n    batchSprite (sprite: ISprite)\r\n    {\r\n        if (this.count === this.batchSize)\r\n        {\r\n            this.flush();\r\n        }\r\n\r\n        sprite.updateVertices(this.vertexViewF32, this.vertexViewU32, this.count * this.quadElementSize);\r\n\r\n        this.count++;\r\n    }\r\n\r\n    flush ()\r\n    {\r\n        const count = this.count;\r\n\r\n        if (count === 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const gl = this.gl;\r\n        const offset = count * this.quadByteSize;\r\n\r\n        if (offset === this.bufferByteSize)\r\n        {\r\n            gl.bufferData(gl.ARRAY_BUFFER, this.data, gl.DYNAMIC_DRAW);\r\n        }\r\n        else\r\n        {\r\n            let view = this.vertexViewF32.subarray(0, offset);\r\n\r\n            gl.bufferSubData(gl.ARRAY_BUFFER, 0, view);\r\n        }\r\n\r\n        gl.drawElements(gl.TRIANGLES, count * this.quadIndexSize, gl.UNSIGNED_SHORT, 0);\r\n\r\n        this.count = 0;\r\n    }\r\n\r\n}\r\n","import CheckShaderMaxIfStatements from './CheckShaderMaxIfStatements';\r\nimport MultiTextureQuadShader from './MultiTextureQuadShader';\r\nimport Texture from '../textures/Texture';\r\nimport Camera from '../gameobjects/Camera';\r\nimport IRenderable from '../gameobjects/IRenderable';\r\nimport ISprite from '../gameobjects/ISprite';\r\n\r\nexport default class WebGLRenderer\r\n{\r\n    canvas: HTMLCanvasElement;\r\n    gl: WebGLRenderingContext;\r\n\r\n    contextOptions: WebGLContextAttributes = {\r\n        alpha: false,\r\n        antialias: false,\r\n        premultipliedAlpha: false,\r\n        stencil: false,\r\n        preserveDrawingBuffer: false\r\n    };\r\n\r\n    clearColor = [ 0, 0, 0, 1 ];\r\n\r\n    shader: MultiTextureQuadShader;\r\n\r\n    width: number;\r\n    height: number;\r\n    resolution: number;\r\n    \r\n    projectionMatrix: Float32Array;\r\n    textureIndex: number[];\r\n    \r\n    maxTextures: number = 0;\r\n    activeTextures: Texture[];\r\n    currentActiveTexture: number;\r\n    startActiveTexture: number;\r\n\r\n    clearBeforeRender: boolean = true;\r\n    optimizeRedraw: boolean = true;\r\n    autoResize: boolean = true;\r\n\r\n    contextLost: boolean = false;\r\n    elementIndexExtension: OES_element_index_uint;\r\n\r\n    constructor (width: number, height: number, resolution: number = 1)\r\n    {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.resolution = resolution;\r\n\r\n        const canvas = document.createElement('canvas');\r\n\r\n        canvas.addEventListener('webglcontextlost', (event) => this.onContextLost(event), false);\r\n        canvas.addEventListener('webglcontextrestored', () => this.onContextRestored(), false);\r\n\r\n        this.canvas = canvas;\r\n\r\n        this.initContext();\r\n\r\n        this.shader = new MultiTextureQuadShader(this);\r\n    }\r\n\r\n    initContext ()\r\n    {\r\n        const gl = this.canvas.getContext('webgl', this.contextOptions);\r\n\r\n        this.gl = gl;\r\n\r\n        this.elementIndexExtension = gl.getExtension('OES_element_index_uint');\r\n\r\n        this.getMaxTextures();\r\n\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/depthFunc\r\n        // gl.enable(gl.DEPTH_TEST);\r\n        // gl.depthFunc(gl.LESS);\r\n\r\n        if (this.shader)\r\n        {\r\n            this.shader.gl = gl;\r\n        }\r\n\r\n        this.resize(this.width, this.height, this.resolution);\r\n    }\r\n\r\n    resize (width: number, height: number, resolution: number = 1)\r\n    {\r\n        this.width = width * resolution;\r\n        this.height = height * resolution;\r\n        this.resolution = resolution;\r\n    \r\n        const canvas = this.canvas;\r\n\r\n        canvas.width = this.width;\r\n        canvas.height = this.height;\r\n    \r\n        if (this.autoResize)\r\n        {\r\n            canvas.style.width = this.width / resolution + 'px';\r\n            canvas.style.height = this.height / resolution + 'px';\r\n        }\r\n    \r\n        this.gl.viewport(0, 0, this.width, this.height);\r\n\r\n        this.projectionMatrix = this.ortho(width, height, -10000, 10000);\r\n    }\r\n\r\n    ortho (width: number, height: number, near: number, far: number): Float32Array\r\n    {\r\n        const m00: number = -2 * (1 / -width);\r\n        const m11: number = -2 * (1 / height);\r\n        const m22: number = 2 * (1 / (near - far));\r\n\r\n        return new Float32Array([ m00, 0, 0, 0, 0, m11, 0, 0, 0, 0, m22, 0, -1, 1, 0, 1 ]);\r\n    }\r\n\r\n    onContextLost (event)\r\n    {\r\n        event.preventDefault();\r\n\r\n        this.contextLost = true;\r\n    }\r\n\r\n    onContextRestored ()\r\n    {\r\n        this.contextLost = false;\r\n\r\n        this.initContext();\r\n    }\r\n\r\n    setBackgroundColor (color: number)\r\n    {\r\n        const clearColor = this.clearColor;\r\n\r\n        const r: number = color >> 16 & 0xFF;\r\n        const g: number = color >> 8 & 0xFF;\r\n        const b: number = color & 0xFF;\r\n        const a: number = (color > 16777215) ? color >>> 24 : 255;\r\n    \r\n        clearColor[0] = r / 255;\r\n        clearColor[1] = g / 255;\r\n        clearColor[2] = b / 255;\r\n        clearColor[3] = a / 255;\r\n\r\n        return this;\r\n    }\r\n\r\n    private getMaxTextures ()\r\n    {\r\n        const gl = this.gl;\r\n\r\n        let maxTextures: number = CheckShaderMaxIfStatements(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS), gl);\r\n\r\n        //  Create temp textures to stop WebGL errors on mac os\r\n        for (let i: number = 0; i < maxTextures; i++)\r\n        {\r\n            let tempTexture = gl.createTexture();\r\n    \r\n            gl.activeTexture(gl.TEXTURE0 + i);\r\n    \r\n            gl.bindTexture(gl.TEXTURE_2D, tempTexture);\r\n    \r\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([ 0, 0, 255, 255 ]));\r\n        }\r\n\r\n        this.maxTextures = maxTextures;\r\n\r\n        this.textureIndex = Array.from(Array(maxTextures).keys());\r\n        this.activeTextures = Array(maxTextures);\r\n\r\n        this.currentActiveTexture = 0;\r\n        this.startActiveTexture = 0;\r\n    }\r\n\r\n    isSizePowerOfTwo (width: number, height: number): boolean\r\n    {\r\n        if (width < 1 || height < 1)\r\n        {\r\n            return false;\r\n        }\r\n\r\n        return ((width & (width - 1)) === 0) && ((height & (height - 1)) === 0);\r\n    }\r\n\r\n    createGLTexture (source: TexImageSource): WebGLTexture\r\n    {\r\n        const gl = this.gl;\r\n\r\n        const glTexture: WebGLTexture = gl.createTexture();\r\n\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, glTexture);\r\n\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\r\n\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n        const pot = this.isSizePowerOfTwo(source.width, source.height);\r\n\r\n        const wrap = (pot) ? gl.REPEAT : gl.CLAMP_TO_EDGE;\r\n\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrap);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrap);\r\n\r\n        if (pot)\r\n        {\r\n            gl.generateMipmap(gl.TEXTURE_2D);\r\n        }\r\n\r\n        return glTexture;\r\n    }\r\n\r\n    render (list: IRenderable[], camera: Camera, dirtyFrame: number)\r\n    {\r\n        if (this.contextLost)\r\n        {\r\n            return;\r\n        }\r\n\r\n        const gl = this.gl;\r\n\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n        if (this.optimizeRedraw && dirtyFrame === 0)\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.currentActiveTexture = 0;\r\n        this.startActiveTexture++;\r\n\r\n        const shader = this.shader;\r\n\r\n        //  CLS\r\n\r\n        gl.viewport(0, 0, this.width, this.height);\r\n\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n        const cls = this.clearColor;\r\n\r\n        if (this.clearBeforeRender)\r\n        {\r\n            gl.clearColor(cls[0], cls[1], cls[2], cls[3]);\r\n            gl.clear(gl.COLOR_BUFFER_BIT);\r\n        }\r\n\r\n        shader.bind(camera);\r\n\r\n        //  Process the render list\r\n        const maxTextures = this.maxTextures;\r\n        const activeTextures = this.activeTextures;\r\n        const startActiveTexture = this.startActiveTexture;\r\n\r\n        for (let i: number = 0; i < list.length; i++)\r\n        {\r\n            let entity = list[i];\r\n\r\n            let texture = entity.texture;\r\n\r\n            if (texture.glIndexCounter < startActiveTexture)\r\n            {\r\n                texture.glIndexCounter = startActiveTexture;\r\n\r\n                if (this.currentActiveTexture < maxTextures)\r\n                {\r\n                    //  Make this texture active\r\n                    activeTextures[this.currentActiveTexture] = texture;\r\n\r\n                    texture.glIndex = this.currentActiveTexture;\r\n\r\n                    gl.activeTexture(gl.TEXTURE0 + this.currentActiveTexture);\r\n                    gl.bindTexture(gl.TEXTURE_2D, texture.glTexture);\r\n\r\n                    this.currentActiveTexture++;\r\n                }\r\n                else\r\n                {\r\n                    //  We've run out, flush + recycle the oldest one\r\n                    //  TODO\r\n                }\r\n            }\r\n\r\n            /*\r\n            if (entity.type === 'SpriteBuffer')\r\n            {\r\n                if (shader.batchSpriteBuffer(entity as SpriteBuffer))\r\n                {\r\n                    //  Reset active textures\r\n                    this.currentActiveTexture = 0;\r\n                    this.startActiveTexture++;\r\n                }\r\n            }\r\n            */\r\n\r\n            shader.batchSprite(entity as ISprite);\r\n        }\r\n\r\n        shader.flush();\r\n    }\r\n}\r\n","export default class File\r\n{\r\n    type: string;\r\n    key: string;\r\n    url: string;\r\n    data: any;\r\n    config: any;\r\n    linkFile: File;\r\n\r\n    loadHandler: Function;\r\n\r\n    hasLoaded: boolean = false;\r\n\r\n    constructor (type: string, key: string, url: string, loadHandler: Function, config?: any)\r\n    {\r\n        this.type = type;\r\n        this.key = key;\r\n        this.url = url;\r\n        this.loadHandler = loadHandler;\r\n        this.config = config;\r\n    }\r\n}","import File from './File';\r\nimport Game from '../Game';\r\nimport IFrameConfig from '../textures/IFrameConfig';\r\n\r\nexport default class Loader\r\n{\r\n    game: Game;\r\n\r\n    baseURL: string = '';\r\n    path: string = '';\r\n    crossOrigin: string | undefined = undefined;\r\n\r\n    maxParallelDownloads: number = 32;\r\n\r\n    isLoading: boolean = false;\r\n\r\n    queue: File[];\r\n    inflight: Map<string, File>;\r\n\r\n    onComplete: Function;\r\n\r\n    constructor (game: Game)\r\n    {\r\n        this.game = game;\r\n\r\n        this.reset();\r\n    }\r\n\r\n    reset ()\r\n    {\r\n        this.isLoading = false;\r\n        this.queue = [];\r\n        this.inflight = new Map();\r\n    }\r\n\r\n    start (onComplete: Function)\r\n    {\r\n        if (this.isLoading)\r\n        {\r\n            return;\r\n        }\r\n\r\n        // console.log('Loader.start', this.totalFilesToLoad());\r\n\r\n        if (this.queue.length > 0)\r\n        {\r\n            this.isLoading = true;\r\n\r\n            this.onComplete = onComplete;\r\n\r\n            this.nextFile();\r\n        }\r\n        else\r\n        {\r\n            onComplete();\r\n        }\r\n    }\r\n\r\n    nextFile ()\r\n    {\r\n        // let total: number = this.inflight.size;\r\n\r\n        let total = this.queue.length;\r\n\r\n        if (total)\r\n        {\r\n            //  One at a time ...\r\n            let file = this.queue.shift();\r\n\r\n            this.inflight.set(file.url, file);\r\n\r\n            // console.log('Loader.nextFile', file.key, file.url);\r\n\r\n            file.loadHandler(file);\r\n        }\r\n        else if (this.inflight.size === 0)\r\n        {\r\n            this.stop();\r\n        }\r\n    }\r\n\r\n    stop ()\r\n    {\r\n        this.isLoading = false;\r\n\r\n        this.onComplete();\r\n    }\r\n\r\n    fileComplete (file: File)\r\n    {\r\n        //  Link file?\r\n        if (file.linkFile && file.linkFile.hasLoaded)\r\n        {\r\n            const imageFile = (file.type === 'atlasimage') ? file : file.linkFile;\r\n            const jsonFile = (file.type === 'atlasjson') ? file : file.linkFile;\r\n\r\n            this.game.textures.addAtlas(file.key, imageFile.data, jsonFile.data);\r\n        }\r\n\r\n        this.inflight.delete(file.url);\r\n\r\n        this.nextFile();\r\n    }\r\n\r\n    fileError (file: File)\r\n    {\r\n        this.inflight.delete(file.url);\r\n\r\n        this.nextFile();\r\n    }\r\n\r\n    totalFilesToLoad (): number\r\n    {\r\n        return this.queue.length + this.inflight.size;\r\n    }\r\n\r\n    image (key: string, url?: string)\r\n    {\r\n        let file = new File('image', key, this.getURL(key, url, '.png'), (file: File) => this.imageTagLoader(file));\r\n\r\n        this.queue.push(file);\r\n\r\n        return this;\r\n    }\r\n\r\n    spritesheet (key: string, url: string, frameConfig: IFrameConfig)\r\n    {\r\n        let file = new File('spritesheet', key, this.getURL(key, url, '.png'), (file: File) => this.imageTagLoader(file));\r\n\r\n        file.config = frameConfig;\r\n\r\n        this.queue.push(file);\r\n\r\n        return this;\r\n    }\r\n\r\n    atlas (key: string, textureURL?: string, atlasURL?: string)\r\n    {\r\n        let textureFile = new File('atlasimage', key, this.getURL(key, textureURL, '.png'), (file: File) => this.imageTagLoader(file));\r\n        let JSONFile = new File('atlasjson', key, this.getURL(key, atlasURL, '.json'), (file: File) => this.XHRLoader(file));\r\n\r\n        JSONFile.config = { responseType: 'text' };\r\n\r\n        textureFile.linkFile = JSONFile;\r\n        JSONFile.linkFile = textureFile;\r\n\r\n        this.queue.push(textureFile);\r\n        this.queue.push(JSONFile);\r\n\r\n        return this;\r\n    }\r\n\r\n    json (key: string, url?: string)\r\n    {\r\n        let file = new File('json', key, this.getURL(key, url, '.json'), (file: File) => this.XHRLoader(file));\r\n\r\n        file.config = { responseType: 'text' };\r\n\r\n        this.queue.push(file);\r\n\r\n        return this;\r\n    }\r\n\r\n    csv (key: string, url?: string)\r\n    {\r\n        let file = new File('csv', key, this.getURL(key, url, '.csv'), (file: File) => this.XHRLoader(file));\r\n\r\n        file.config = { responseType: 'text' };\r\n\r\n        this.queue.push(file);\r\n\r\n        return this;\r\n    }\r\n\r\n    XHRLoader (file: File)\r\n    {\r\n        const xhr = new XMLHttpRequest();\r\n\r\n        xhr.open('GET', file.url, true);\r\n\r\n        xhr.responseType = file.config['responseType'];\r\n\r\n        xhr.onload = (event: ProgressEvent) => {\r\n\r\n            file.hasLoaded = true;\r\n\r\n            if (file.type === 'json' || file.type === 'atlasjson')\r\n            {\r\n                file.data = JSON.parse(xhr.responseText);\r\n            }\r\n            else\r\n            {\r\n                file.data = xhr.responseText;\r\n            }\r\n\r\n            this.fileComplete(file);\r\n\r\n        };\r\n\r\n        xhr.onerror = () => {\r\n\r\n            file.hasLoaded = true;\r\n\r\n            this.fileError(file);\r\n\r\n        };\r\n\r\n        xhr.send();\r\n    }\r\n\r\n    imageTagLoader (file: File)\r\n    {\r\n        // console.log('Loader.imageTagLoader', file.key);\r\n        // console.log(this);\r\n\r\n        file.data = new Image();\r\n\r\n        if (this.crossOrigin)\r\n        {\r\n            file.data.crossOrigin = this.crossOrigin;\r\n        }\r\n\r\n        file.data.onload = () => {\r\n\r\n            // console.log('File.data.onload', file.key);\r\n\r\n            file.data.onload = null;\r\n            file.data.onerror = null;\r\n            file.hasLoaded = true;\r\n\r\n            if (file.type === 'image')\r\n            {\r\n                this.game.textures.addImage(file.key, file.data);\r\n            }\r\n            else if (file.type === 'spritesheet')\r\n            {\r\n                this.game.textures.addSpriteSheet(file.key, file.data, file.config);\r\n            }\r\n\r\n            this.fileComplete(file);\r\n\r\n        };\r\n\r\n        file.data.onerror = () => {\r\n\r\n            // console.log('File.data.onerror', file.key);\r\n\r\n            file.data.onload = null;\r\n            file.data.onerror = null;\r\n            file.hasLoaded = true;\r\n\r\n            this.fileError(file);\r\n\r\n        };\r\n\r\n        file.data.src = file.url;\r\n\r\n        //  Image is cached / available immediately\r\n        if (file.data.complete && file.data.width && file.data.height)\r\n        {\r\n            file.data.onload = null;\r\n            file.data.onerror = null;\r\n            file.hasLoaded = true;\r\n\r\n            if (file.type === 'image')\r\n            {\r\n                this.game.textures.addImage(file.key, file.data);\r\n            }\r\n            else if (file.type === 'spritesheet')\r\n            {\r\n                this.game.textures.addSpriteSheet(file.key, file.data, file.config);\r\n            }\r\n\r\n            this.fileComplete(file);\r\n        }\r\n    }\r\n\r\n    getURL (key: string, url: string, extension: string)\r\n    {\r\n        if (!url)\r\n        {\r\n            url = key + extension;\r\n        }\r\n\r\n        if (url.match(/^(?:blob:|data:|http:\\/\\/|https:\\/\\/|\\/\\/)/))\r\n        {\r\n            return url;\r\n        }\r\n        else\r\n        {\r\n            return this.baseURL + this.path + url;\r\n        }\r\n    }\r\n\r\n    setBaseURL (url: string)\r\n    {\r\n        if (url !== '' && url.substr(-1) !== '/')\r\n        {\r\n            url = url.concat('/');\r\n        }\r\n\r\n        this.baseURL = url;\r\n\r\n        return this;\r\n    }\r\n\r\n    setPath (path: string)\r\n    {\r\n        if (path !== '' && path.substr(-1) !== '/')\r\n        {\r\n            path = path.concat('/');\r\n        }\r\n\r\n        this.path = path;\r\n\r\n        return this;\r\n    }\r\n\r\n    setCORS (crossOrigin)\r\n    {\r\n        this.crossOrigin = crossOrigin;\r\n\r\n        return this;\r\n    }\r\n\r\n}\r\n","class EE\r\n{\r\n    callback: Function;\r\n    context: any;\r\n    once: boolean;\r\n\r\n    constructor (callback: Function, context: any, once: boolean = false)\r\n    {\r\n        this.callback = callback;\r\n        this.context = context;\r\n        this.once = once;\r\n    }\r\n}\r\n\r\nexport default class EventEmitter\r\n{\r\n    private _events: Map<string, Set<EE>>;\r\n\r\n    constructor ()\r\n    {\r\n        this._events = new Map();\r\n    }\r\n\r\n    on (event: string, callback: Function, context: any = this, once: boolean = false)\r\n    {\r\n        if (typeof callback !== 'function')\r\n        {\r\n            throw new TypeError('The listener must be a function');\r\n        }\r\n\r\n        const listener = new EE(callback, context, once);\r\n        const listeners = this._events.get(event);\r\n\r\n        if (!listeners)\r\n        {\r\n            this._events.set(event, new Set([ listener ]));\r\n        }\r\n        else\r\n        {\r\n            listeners.add(listener);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    once (event: string, callback: Function, context: any = this)\r\n    {\r\n        return this.on(event, callback, context, true);\r\n    }\r\n\r\n    /**\r\n     * Clear an event by name.\r\n     */\r\n    clearEvent (event: string)\r\n    {\r\n        this._events.delete(event);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Return an array listing the events for which the emitter has registered listeners.\r\n     */\r\n    eventNames (): string[]\r\n    {\r\n        return [ ...this._events.keys() ];\r\n    }\r\n\r\n    /**\r\n     * Return the listeners registered for a given event.\r\n     */\r\n    listeners (event: string): Function[]\r\n    {\r\n        const out = [];\r\n\r\n        const listeners = this._events.get(event);\r\n\r\n        listeners.forEach((ee) => {\r\n\r\n            out.push(ee.callback);\r\n\r\n        });\r\n\r\n        return out;\r\n    }\r\n\r\n    /**\r\n     * Return the number of listeners listening to a given event.\r\n     */\r\n    listenerCount (event: string): number\r\n    {\r\n        const listeners = this._events.get(event);\r\n\r\n        return (listeners) ? listeners.size : 0;\r\n    }\r\n\r\n    /**\r\n     * Calls each of the listeners registered for a given event.\r\n     */\r\n    emit (event: string, ...args: any[]): boolean\r\n    {\r\n        if (!this._events.has(event))\r\n        {\r\n            return false;\r\n        }\r\n\r\n        const listeners = this._events.get(event);\r\n\r\n        for (const ee of listeners)\r\n        {\r\n            ee.callback.apply(ee.context, args);\r\n\r\n            if (ee.once)\r\n            {\r\n                listeners.delete(ee);\r\n            }\r\n        }\r\n\r\n        if (listeners.size === 0)\r\n        {\r\n            this._events.delete(event);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Remove the listeners of a given event.\r\n     * \r\n     * @param event \r\n     * @param callback \r\n     * @param context \r\n     * @param once \r\n     */\r\n    off (event: string, callback?: Function, context?: any, once?: boolean)\r\n    {\r\n        if (!callback)\r\n        {\r\n            //  Remove all events matching the given key\r\n            this._events.delete(event);\r\n        }\r\n        else\r\n        {\r\n            const listeners = this._events.get(event);\r\n            const hasContext: boolean = !context;\r\n            const hasOnce: boolean = (once !== undefined);\r\n\r\n            for (const ee of listeners)\r\n            {\r\n                if (ee.callback === callback && (hasContext && ee.context === console) && (hasOnce && ee.once === once))\r\n                {\r\n                    listeners.delete(ee);\r\n                }\r\n            }\r\n\r\n            if (listeners.size === 0)\r\n            {\r\n                this._events.delete(event);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove all listeners, or those of the specified event.\r\n     * \r\n     * @param event \r\n     */\r\n    removeAllListeners (event?: string)\r\n    {\r\n        if (!event)\r\n        {\r\n            this._events.clear();\r\n        }\r\n        else\r\n        {\r\n            this._events.delete(event);\r\n        }\r\n    }\r\n}\r\n","import DOMContentLoaded from './core/DOMContentLoaded';\r\nimport AddToDOM from './core/AddToDOM';\r\nimport WebGLRenderer from './renderer/WebGLRenderer';\r\nimport Loader from './loader/Loader';\r\nimport SceneManager from './scenes/SceneManager';\r\nimport TextureManager from './textures/TextureManager';\r\nimport IGameConfig from './IGameConfig';\r\nimport EventEmitter from './core/EventEmitter';\r\nimport IRenderable from './gameobjects/IRenderable';\r\n\r\nexport default class Game extends EventEmitter\r\n{\r\n    VERSION: string = '4.0.0-beta2';\r\n\r\n    config: IGameConfig;\r\n\r\n    isPaused: boolean = false;\r\n    isBooted: boolean = false;\r\n\r\n    loader: Loader;\r\n    scenes: SceneManager;\r\n    textures: TextureManager;\r\n    renderer: WebGLRenderer;\r\n\r\n    private lastTick: number;\r\n    lifetime: number = 0;\r\n    elapsed: number = 0;\r\n\r\n    //  The current game frame\r\n    frame: number = 0;\r\n\r\n    //  How many Game Objects were made dirty this frame?\r\n    dirtyFrame: number = 0;\r\n\r\n    //  How many Game Objects were processed this frame?\r\n    totalFrame: number = 0;\r\n\r\n    constructor (config?: IGameConfig)\r\n    {\r\n        super();\r\n\r\n        const {\r\n            width = 800,\r\n            height = 600,\r\n            backgroundColor = 0x00000,\r\n            parent = document.body,\r\n            scene = null\r\n        } = config;\r\n\r\n        this.config = { width, height, backgroundColor, parent, scene };\r\n\r\n        DOMContentLoaded(() => this.boot());\r\n    }\r\n\r\n    pause ()\r\n    {\r\n        this.isPaused = true;\r\n\r\n        this.emit('pause');\r\n    }\r\n\r\n    resume ()\r\n    {\r\n        this.isPaused = false;\r\n\r\n        this.lastTick = Date.now();\r\n\r\n        this.emit('resume');\r\n    }\r\n\r\n    boot ()\r\n    {\r\n        this.isBooted = true;\r\n        this.lastTick = Date.now();\r\n\r\n        this.textures = new TextureManager(this);\r\n        this.loader = new Loader(this);\r\n\r\n        const config = this.config;\r\n\r\n        const renderer = new WebGLRenderer(config.width, config.height);\r\n\r\n        renderer.setBackgroundColor(config.backgroundColor);\r\n\r\n        AddToDOM(renderer.canvas, config.parent);\r\n\r\n        this.renderer = renderer;\r\n\r\n        this.banner(this.VERSION);\r\n\r\n        //  Visibility API\r\n        document.addEventListener('visibilitychange', () => {\r\n\r\n            this.emit('visibilitychange', document.hidden);\r\n\r\n            if (document.hidden)\r\n            {\r\n                this.pause();\r\n            }\r\n            else\r\n            {\r\n                this.resume();\r\n            }\r\n\r\n        });\r\n\r\n        // window.addEventListener('blur', () => this.pause());\r\n        // window.addEventListener('focus', () => this.resume());\r\n\r\n        /*\r\n        const scene = this.scene;\r\n\r\n        this.scene.init();\r\n\r\n        this.emit('boot');\r\n\r\n        this.scene.preload();\r\n\r\n        if (this.loader.totalFilesToLoad() > 0)\r\n        {\r\n            this.loader.start(() => this.start());\r\n        }\r\n        else\r\n        {\r\n            this.start();\r\n        }\r\n        */\r\n    }\r\n\r\n    start ()\r\n    {\r\n        // this.scene.create();\r\n\r\n        requestAnimationFrame(() => this.step());\r\n    }\r\n\r\n    banner (version: string)\r\n    {\r\n        console.log(\r\n            '%c  %c  %cPhaser Nano v' + version + '%c https://phaser4.io',\r\n            'padding: 2px; background: linear-gradient(to right, #00bcc3, #3e0081)',\r\n            'padding: 2px; background: #3e0081 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJ1BMVEUALon///+9tJQAAABv9v92d2IAn6qHEhL/DQ3/fCUOOlNMPUD/uz24pItZAAAAaElEQVQI12OAA/YCKKPyOANbWgKQUdFZkOLiBmJ0zHIRdAEKWXR0uQimABnWu3elpIEYhoKCYS4ui8EModBQRQMG09AgQSBQBmpvBzOABhYpAYEBg3FpEJAOZgCqAdEGDAzGIACk4QAAsv0aPCHrnowAAAAASUVORK5CYII=) no-repeat;',\r\n            'padding: 2px 20px 2px 8px; color: #fff; background: linear-gradient(to right, #3e0081 90%, #3e0081 10%, #00bcc3)',\r\n            ''\r\n        );\r\n    }\r\n\r\n    step ()\r\n    {\r\n        const now = Date.now();\r\n        const delta = now - this.lastTick;\r\n\r\n        const dt = delta / 1000;\r\n\r\n        this.lifetime += dt;\r\n        this.elapsed = dt;\r\n        this.lastTick = now;\r\n    \r\n        this.emit('step', dt, now);\r\n\r\n        if (!this.isPaused)\r\n        {\r\n            this.scenes.update(dt, now);\r\n        }\r\n\r\n        this.emit('update', dt, now);\r\n\r\n        //  These should probably be moved to the Scene Manager\r\n        //  so each Scene is classed as being dirty or not?\r\n        this.dirtyFrame = 0;\r\n        this.totalFrame = 0;\r\n\r\n        //  Each Scene calls 'render' on the Renderer, that way we could cache\r\n        //  the Scene display, if it was paused or something\r\n        this.scenes.render();\r\n\r\n        // const renderList: IRenderable[] = this.scene.world.preRender();\r\n\r\n        // this.renderer.render(renderList, this.scene.camera, this.dirtyFrame);\r\n\r\n        this.emit('render', dt, now);\r\n\r\n        //  The frame always advances by 1 each step (even when paused)\r\n        this.frame++;\r\n\r\n        requestAnimationFrame(() => this.step());\r\n    }\r\n\r\n    destroy ()\r\n    {\r\n        //  TODO\r\n    }\r\n\r\n}\r\n","import Game from './Game';\r\nimport Loader from './loader/Loader';\r\nimport TextureManager from './textures/TextureManager';\r\nimport Camera from './gameobjects/Camera';\r\nimport World from './gameobjects/World';\r\n\r\nexport default class Scene\r\n{\r\n    camera: Camera;\r\n    game: Game;\r\n    load: Loader;\r\n    textures: TextureManager;\r\n    world: World;\r\n\r\n    constructor (game: Game)\r\n    {\r\n        this.game = game;\r\n        this.load = game.loader;\r\n        this.textures = game.textures;\r\n        this.world = new World(this);\r\n        this.camera = new Camera(this, 0, 0);\r\n    }\r\n\r\n    init ()\r\n    {\r\n    }\r\n\r\n    preload ()\r\n    {\r\n    }\r\n\r\n    create ()\r\n    {\r\n    }\r\n\r\n    update (delta?: number, time?: number)\r\n    {\r\n    }\r\n\r\n}\r\n","import * as Components from './components/';\r\nimport * as GameObjects from './gameobjects/';\r\nimport * as Math from './math/';\r\nimport * as Textures from './textures/';\r\nimport Game from './Game';\r\nimport Scene from './Scene';\r\nimport EventEmitter from './core/EventEmitter';\r\nimport Loader from './loader/Loader';\r\nimport WebGLRenderer from './renderer/WebGLRenderer';\r\n\r\nexport default {\r\n    Game,\r\n    Scene,\r\n    Components,\r\n    EventEmitter,\r\n    GameObjects,\r\n    Loader,\r\n    Math,\r\n    WebGLRenderer,\r\n    Textures\r\n}\r\n"],"names":["Components.AlphaComponent","Components.DirtyComponent","Components.ParentComponent","Components.OriginComponent","Components.PositionComponent","Components.RenderableComponent","Components.RotationComponent","Components.ScaleComponent","Components.SceneComponent","Components.SizeComponent","Components.SkewComponent","Components.TransformComponent","Components.VisibleComponent","Components.ContainerComponent","Components.QuadAlphaComponent","Components.QuadTintComponent","Components.TextureComponent","Components.AnimationComponent","Math"],"mappings":"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"}